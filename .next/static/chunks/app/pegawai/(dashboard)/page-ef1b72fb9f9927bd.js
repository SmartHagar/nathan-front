(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3486],{8260:function(e,a,t){Promise.resolve().then(t.bind(t,2264))},2264:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return R}});var s=t(9268),r=t(6006),l=t(5282),n=t(6394),i=t.n(n),d=t(3415),o=t(5326),c=t.n(o),u=t(2561),h=t(4475);let m=(0,u.Ue)((0,h.mW)((e,a)=>({dtRiwayatJabatan:[],setRiwayatJabatan:async a=>{try{let t=await (0,d.hi)({method:"get",url:"/personalia/riwayat/jabatan/".concat(a)});return e(e=>{var a;return{...e,dtRiwayatJabatan:null===(a=t.data)||void 0===a?void 0:a.data}}),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}}}))),x=(0,u.Ue)((0,h.mW)((e,a)=>({dtRiwayatPendidikan:[],setRiwayatPendidikan:async a=>{try{let t=await (0,d.hi)({method:"get",url:"/personalia/riwayat/pendidikan/".concat(a)});return e(e=>{var a;return{...e,dtRiwayatPendidikan:null===(a=t.data)||void 0===a?void 0:a.data}}),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}}}))),p=(0,u.Ue)((0,h.mW)((e,a)=>({dtRiwayatPekerjaan:[],setRiwayatPekerjaan:async a=>{try{let t=await (0,d.hi)({method:"get",url:"/personalia/riwayat/pekerjaan/".concat(a)});return e(e=>{var a;return{...e,dtRiwayatPekerjaan:null===(a=t.data)||void 0===a?void 0:a.data}}),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}}})));var j=e=>{let{text:a,onClick:t}=e;return(0,s.jsx)("button",{onClick:t,className:"bg-secondary rounded-lg px-4 py-2 text-white w-fit cursor-pointer hover:shadow-sm hover:shadow-secondary",children:a})},v=t(366),g=t(2985),f=t(7808),k=t(9442),w=t(9700),b=t(5407),N=t(63),y=t(4176),_=t(4496),Z=t(4439),C=t(1823);t(6760);var Y=e=>{var a;let{register:t,errors:l,control:n,dtEdit:i,watch:d,setValue:o,showModal:c,tgl_lahir:u,setTgl_lahir:h,tipe:m,myFile:x,setMyFile:p}=e,{setPangkat:j,dtPangkat:v}=(0,C.Z)(),f=async e=>{let{search:a}=e;await j({search:a})};return(0,r.useEffect)(()=>{f({})},[c]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Z,{label:"NIK",name:"NIK",register:t,required:!0,minLength:3,errors:l.NIK,addClass:"col-span-4"}),(0,s.jsx)(g.Z,{label:"Nama",name:"nama",register:t,required:!0,minLength:3,errors:l.nama,addClass:"col-span-4"}),"dosen"===m&&(0,s.jsx)(g.Z,{label:"NIDN",name:"NIDN",register:t,addClass:"col-span-4"}),(null==v?void 0:v.data)&&(0,s.jsx)(_.Z,{label:"Pangkat",placeholder:"Pilih Pangkat",name:"pangkat_id",dataDb:null==v?void 0:v.data,body:["id","gol","ruang"],control:n,required:!0,errors:l.pangkat_id,addClass:"col-span-4"}),(0,s.jsx)("div",{className:"col-span-4 lg:col-span-2",children:(0,s.jsxs)("div",{className:"w-[100%]",children:[(0,s.jsx)("label",{className:"block py-2 text-sm font-medium text-gray-700 tracking-wide",children:"Jenis Kelamin"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(y.Z,{id:"Laki-laki",name:"jenkel",value:"Laki-laki",register:t,required:!0,defaultChecked:(null==i?void 0:i.jenkel)==="Laki-laki"}),(0,s.jsx)(y.Z,{id:"Perempuan",name:"jenkel",value:"Perempuan",register:t,required:!0,defaultChecked:(null==i?void 0:i.jenkel)==="Perempuan"})]}),(null==l?void 0:null===(a=l.jenkel)||void 0===a?void 0:a.type)==="required"&&(0,s.jsx)("p",{className:"text-red-500 font-inter italic text-sm",children:"Jenis kelamin tidak boleh kosong"})]})}),(0,s.jsx)(g.Z,{label:"Tempat Lahir",name:"tempat_lahir",register:t,required:!0,minLength:3,errors:l.tempat_lahir,addClass:"col-span-4 lg:col-span-2"}),(0,s.jsx)(b.Z,{label:"Tgl. Lahir",name:"tgl_lahir",control:n,startDate:u,setStartDate:h,required:!0,errors:l.tgl_lahir,addClass:"col-span-4 lg:col-span-2"}),(0,s.jsx)(g.Z,{label:"No. Hp",name:"no_hp",register:t,required:!0,minLength:3,errors:l.no_hp,addClass:"col-span-4 lg:col-span-2"}),(0,s.jsx)(g.Z,{label:"Pend. Terakhir",name:"pend_terakhir",register:t,required:!0,minLength:1,errors:l.pend_terakhir,addClass:"col-span-4 lg:col-span-2"}),(0,s.jsx)(Z.Z,{label:"Tahun Terima",name:"thn_terima",control:n,start:new Date().getFullYear()-50,end:new Date().getFullYear(),required:!0,errors:l.thn_terima,addClass:"col-span-4 lg:col-span-1"}),(0,s.jsx)(g.Z,{label:"Jumlah_anak",name:"jumlah_anak",register:t,required:!0,minLength:1,type:"number",errors:l.jumlah_anak,addClass:"col-span-4 lg:col-span-1"}),(0,s.jsx)(g.Z,{label:"Alamat",name:"alamat",register:t,required:!0,minLength:1,errors:l.alamat,addClass:"col-span-4"}),(0,s.jsx)(N.Z,{label:"Foto",name:"foto",register:t,accept:"image/*",required:!0,errors:l.foto,addClass:"col-span-4",setValue:o,fileEdit:null==i?void 0:i.foto,myFile:x,setMyFile:p})]})},L=t(8468),P=t(593),I=e=>{let{showModal:a,setShowModal:t,dtEdit:l,tipe:n}=e,[i,d]=(0,r.useState)(new Date("01-01-1980")),[o,c]=(0,r.useState)(!1),[u,h]=(0,r.useState)(),{addData:m,updatePegawai:x}=(0,L.Z)(),{register:p,handleSubmit:j,setValue:b,control:N,formState:{errors:y},watch:_}=(0,w.cI)(),Z=()=>{b("id",""),b("NIK",""),b("pangkat_id",""),b("tipe",n),b("NIDN",""),b("nama",""),b("tempat_lahir",""),d(new Date("01-01-1980")),b("tgl_lahir","1980-01-01"),b("no_hp",""),b("jumlah_anak",0),b("jenkel",""),b("pend_terakhir",""),b("alamat",""),b("thn_terima",""),b("foto",""),h(null)};(0,r.useEffect)(()=>{l?(b("id",l.id),b("pangkat_id",l.pangkat_id),b("NIK",l.NIK),b("tipe",l.tipe),b("NIDN",l.NIDN||""),b("nama",l.nama),b("tempat_lahir",l.tempat_lahir),b("tgl_lahir",l.tgl_lahir),d(new Date(l.tgl_lahir)),b("no_hp",l.no_hp),b("jumlah_anak",l.jumlah_anak),b("jenkel",l.jenkel),b("pend_terakhir",l.pend_terakhir),b("alamat",l.alamat),b("thn_terima",parseInt(l.thn_terima)),b("foto",l.foto)):Z()},[a,l]);let C=async e=>{if(c(!0),console.log({row:e}),l){let{data:a}=await x(l.id,e);console.log({data:a}),(0,k.Z)({event:a}),t(!1)}else{let{data:a}=await m(e);console.log({data:a}),(0,k.Z)({event:a}),(null==a?void 0:a.type)!=="success"||Z()}setTimeout(()=>{c(!1)},1500)};return(0,s.jsx)(f.Z,{title:"Form Pegawai",showModal:a,setShowModal:t,children:(0,s.jsxs)("form",{onSubmit:j(C),children:[(0,s.jsx)(g.Z,{name:"id",register:p,type:"hidden"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,s.jsx)(Y,{register:p,errors:y,dtEdit:l,control:N,watch:_,setValue:b,showModal:a,tgl_lahir:i,setTgl_lahir:d,tipe:n,myFile:u,setMyFile:h})}),(0,s.jsx)("div",{children:o?(0,s.jsx)(P.Z,{}):(0,s.jsx)(v.Z,{text:"Simpan",onClick:j(C)})})]})})},T=t(8919),R=e=>{let{showPegawai:a}=(0,r.useContext)(l.T),[t,n]=(0,r.useState)(),[o,u]=(0,r.useState)(!1),{setRiwayatJabatan:h,dtRiwayatJabatan:v}=m(),{setRiwayatPendidikan:g,dtRiwayatPendidikan:f}=x(),{setRiwayatPekerjaan:k,dtRiwayatPekerjaan:w}=p(),b=async()=>{await h(null==a?void 0:a.id)},N=async()=>{await g(null==a?void 0:a.id)},y=async()=>{await k(null==a?void 0:a.id)};(0,r.useMemo)(()=>{b(),N(),y()},[null==a?void 0:a.id]);let _=e=>{u(!0),n(e)};return(0,s.jsxs)("section",{className:"text-gray-600 body-font h-full overflow-auto",children:[(0,s.jsx)(T.Toaster,{}),(0,s.jsx)(I,{dtEdit:t,showModal:o,setShowModal:u,tipe:null==a?void 0:a.tipe}),(0,s.jsxs)("div",{className:"container mx-auto flex px-5 pt-14 pb-4 md:flex-row flex-col items-center  h-full",children:[(0,s.jsxs)("div",{className:"lg:max-w-xs md:w-1/2 w-5/6 mb-10 md:mb-0",children:[(null==a?void 0:a.foto)&&(0,s.jsx)(i(),{className:"object-cover object-center rounded",alt:"hero",src:"".concat(d._n,"/").concat(a.foto),width:300,height:100}),(0,s.jsx)("div",{className:"mt-2 text-center",children:(0,s.jsx)(j,{text:"Ubah",onClick:()=>_(a)})})]}),(0,s.jsxs)("div",{className:"lg:flex-grow md:w-1/2 md:pl-16 flex flex-col md:text-left h-full",children:[(0,s.jsx)("h3",{className:"",children:null==a?void 0:a.nama}),(0,s.jsxs)("div",{className:" overflow-auto my-6",children:[(0,s.jsx)("table",{cellPadding:4,children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"NIK"}),(0,s.jsx)("td",{className:"pl-2",children:":"}),(0,s.jsx)("td",{children:null==a?void 0:a.NIK})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Tempat, Tgl. Lahir"}),(0,s.jsx)("td",{className:"pl-2",children:":"}),(0,s.jsxs)("td",{children:[null==a?void 0:a.tempat_lahir,","," ",c()(null==a?void 0:a.tgl_lahir).format("DD-MM-YYYY")]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"No. HP"}),(0,s.jsx)("td",{className:"pl-2",children:":"}),(0,s.jsx)("td",{children:null==a?void 0:a.no_hp})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Jumlah anak"}),(0,s.jsx)("td",{className:"pl-2",children:":"}),(0,s.jsx)("td",{children:null==a?void 0:a.jumlah_anak})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Jenis Kelamin"}),(0,s.jsx)("td",{className:"pl-2",children:":"}),(0,s.jsx)("td",{children:null==a?void 0:a.jenkel})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Pendidikan Terakhir"}),(0,s.jsx)("td",{className:"pl-2",children:":"}),(0,s.jsx)("td",{children:null==a?void 0:a.pend_terakhir})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Alamat"}),(0,s.jsx)("td",{className:"pl-2",children:":"}),(0,s.jsx)("td",{children:null==a?void 0:a.alamat})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Tahun Masuk"}),(0,s.jsx)("td",{className:"pl-2",children:":"}),(0,s.jsx)("td",{children:null==a?void 0:a.thn_terima})]})]})}),(0,s.jsx)("h4",{className:"mt-8 mb-2",children:"Riwayat Jabatan"}),(0,s.jsx)("div",{children:v&&(null==v?void 0:v.map((e,a)=>{var t;return(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"pr-2",children:null==e?void 0:null===(t=e.jabatan)||void 0===t?void 0:t.nama}),(0,s.jsxs)("span",{children:[c()(null==e?void 0:e.mulai).format("YYYY")," sampai"," ",c()(null==e?void 0:e.seles).format("YYYY")]})]},a)}))}),(0,s.jsx)("h4",{className:"mt-8 mb-2",children:"Riwayat Pendidikan"}),(0,s.jsx)("div",{children:f&&(null==f?void 0:f.map((e,a)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"pr-2",children:null==e?void 0:e.jenjang}),(0,s.jsx)("span",{className:"pr-2",children:null==e?void 0:e.instansi}),(0,s.jsxs)("span",{children:[c()(null==e?void 0:e.mulai).format("YYYY")," sampai"," ",c()(null==e?void 0:e.seles).format("YYYY")]})]},a)))}),(0,s.jsx)("h4",{className:"mt-8 mb-2",children:"Riwayat Pekerjaan"}),(0,s.jsx)("div",{children:w&&(null==w?void 0:w.map((e,a)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"pr-2",children:null==e?void 0:e.instansi}),(0,s.jsx)("span",{className:"pr-2",children:null==e?void 0:e.jabatan}),(0,s.jsxs)("span",{children:[c()(null==e?void 0:e.mulai).format("YYYY")," sampai"," ",c()(null==e?void 0:e.seles).format("YYYY")]})]},a)))})]}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)(j,{text:"Cetak",onClick:()=>{window.open("".concat(d._n,"/export/biodata/").concat(null==a?void 0:a.id),"_blank")}})})]})]})]})}},366:function(e,a,t){"use strict";var s=t(9268);t(6006),a.Z=e=>{let{text:a,onClick:t,addClass:r}=e;return(0,s.jsx)("button",{onClick:t,className:"bg-primary rounded-lg px-4 py-2 text-white w-fit cursor-pointer hover:shadow-sm hover:shadow-primary ".concat(r),children:a})}},2985:function(e,a,t){"use strict";var s=t(9268),r=t(6006),l=t(8136);a.Z=e=>{let{label:a,register:t,required:n,name:i,minLength:d,maxLength:o,errors:c,valueAsNumber:u,type:h="text",readOnly:m,placeholder:x,autoComplete:p="on",addClass:j,value:v,defaultValue:g}=e,[f,k]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:j,children:[(0,s.jsx)("label",{htmlFor:i,className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),n&&(0,s.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",type:"password"===h?f?"text":"password":h,id:i,readOnly:m,placeholder:x,autoComplete:p,...t(i,{required:n,minLength:d,maxLength:o,valueAsNumber:u}),value:v,defaultValue:g}),"password"===h&&(0,s.jsx)("div",{className:"absolute right-2 top-0 flex items-center h-full cursor-pointer text-blue-600",onClick:()=>{k(!f)},children:f?(0,s.jsx)(l.rCC,{size:20}):(0,s.jsx)(l.I$m,{size:20})})]}),(null==c?void 0:c.type)==="required"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kosong"]}),(null==c?void 0:c.type)==="minLength"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kurang dari ",d," karakter"]}),(null==c?void 0:c.type)==="maxLength"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh lebih dari ",o," karakter"]}),(null==c?void 0:c.type)==="pattern"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," hanya boleh angka."]}),(null==c?void 0:c.message)&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[null==c?void 0:c.message,"."]})]})}},593:function(e,a,t){"use strict";var s=t(9268);t(6006),a.Z=()=>(0,s.jsx)("div",{children:"Loading..."})},7808:function(e,a,t){"use strict";var s=t(9268);t(6006);var r=t(8136);a.Z=e=>{let{showModal:a,setShowModal:t,children:l,title:n,width:i=""}=e;return(0,s.jsx)("div",{className:"",children:a&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 mx-auto flex justify-center bg-black/[0.2]",children:(0,s.jsxs)("div",{className:"bg-white p-5 rounded-xl w-[500px] h-min mt-[10%] max-h-[70%] overflow-hidden flex flex-col lg:w-[700px]",style:{width:i},children:[(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between border-b border-primary/[0.2] mb-4 pb-2",children:[(0,s.jsx)("h5",{className:"text-xl font-roboto",children:n}),(0,s.jsx)(r.C7Q,{className:"cursor-pointer hover:text-primary",onClick:()=>t(!1)})]}),(0,s.jsx)("div",{className:"overflow-auto",children:l})]})})})}},5282:function(e,a,t){"use strict";t.d(a,{T:function(){return i}});var s=t(9268),r=t(6006),l=t(1712),n=t(8468);let i=(0,r.createContext)({showPegawai:null});a.Z=e=>{let{children:a}=e,t=parseInt(l.Z.get("user_id")),{setShowPegawai:d,showPegawai:o}=(0,n.Z)();return(0,r.useEffect)(()=>(d(t),()=>{d(0)}),[t,d]),(0,s.jsx)(i.Provider,{value:{showPegawai:o},children:a})}},3415:function(e,a,t){"use strict";t.d(a,{I8:function(){return l},Sj:function(){return n},_n:function(){return r},hi:function(){return i}});var s=t(5953);let r="https://back.nathan-fst.my.id",l=s.Z.create({baseURL:"".concat(r,"/auth")}),n=s.Z.create({baseURL:"".concat(r,"/crud")}),i=s.Z.create({baseURL:"".concat(r,"/api")});s.Z.create({baseURL:"".concat(r,"/storage")})},4406:function(e,a,t){"use strict";var s=t(2561),r=t(4475),l=t(3415),n=t(1712);let i=(0,s.Ue)((0,r.mW)((e,a)=>({dtLogin:[],setToken:async()=>{let e=n.Z.get("token");return e},setLogin:async e=>{try{let a=await (0,l.I8)({method:"post",url:"/login",data:e});return{status:"success",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},cekToken:async()=>{let t=await a().setToken();try{let a=await (0,l.I8)({method:"post",url:"/cek_token",headers:{Authorization:"Bearer ".concat(t)}});return e(e=>({...e,dtLogin:a.data.data})),{status:"success",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setUpdate:async(t,s)=>{try{let r=await a().setToken(),n=await (0,l.I8)({method:"post",url:"/update/".concat(t),headers:{Authorization:"Bearer ".concat(r)},data:s});return e(e=>({...e,dtLogin:n.data.data})),{status:"success",data:n.data}}catch(e){return console.log(e.response.data),{status:"error",data:e.response.data}}}})));a.Z=i},9442:function(e,a,t){"use strict";var s=t(8919);a.Z=e=>{let{event:a,position:t}=e;switch(a.type){case"success":s.default.success(a.message,{duration:4e3,position:t});break;case"error":s.default.error(a.message,{duration:4e3,position:t})}}}},function(e){e.O(0,[6680,4550,5678,6394,9700,3088,3861,7133,2789,9253,7698,1744],function(){return e(e.s=8260)}),_N_E=e.O()}]);