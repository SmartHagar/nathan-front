(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6634],{3777:function(a,e,t){Promise.resolve().then(t.bind(t,5471))},5471:function(a,e,t){"use strict";t.r(e),t.d(e,{default:function(){return P}});var s=t(9268),r=t(6006),l=t(593),n=t(5437),i=t(9639),d=t(5282),o=t(7191),u=a=>{let{setDelete:e,setEdit:t,search:u}=a,{showPegawai:c}=(0,r.useContext)(d.T),{setShowRiwayatJabatan:p,dtRiwayatJabatan:h}=(0,o.Z)(),[g,m]=(0,r.useState)(1),[w,j]=(0,r.useState)(10),[f,x]=(0,r.useState)(!0),_=async()=>{await p(null==c?void 0:c.id),x(!1)};return(0,r.useEffect)(()=>(_(),()=>{}),[g,w,null==c?void 0:c.id]),(0,r.useEffect)(()=>{m(1),_()},[u]),(0,s.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:f?(0,s.jsx)(l.Z,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"",children:(0,s.jsx)(i.Z,{headTable:["No","Nama","Jabatan","Mulai","Selesai","Aksi"],tableBodies:["pegawai.nama","jabatan.nama","mulai","seles"],dataTable:h.data,page:g,limit:w,setEdit:t,setDelete:e,ubah:!0,hapus:!0})}),(null==h?void 0:h.last_page)>1&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(n.Z,{currentPage:null==h?void 0:h.current_page,totalPages:null==h?void 0:h.last_page,setPage:m})})]})})},c=t(366),p=t(2985),h=t(7808),g=t(9442),m=t(9700),w=t(5407),j=t(4496),f=t(9879),x=t(2743);t(6760);var _=a=>{let{register:e,errors:t,control:l,dtEdit:n,watch:i,setValue:d,showModal:o,mulai:u,setMulai:c,seles:p,setSeles:h}=a,{setPegawai:g,dtPegawai:m}=(0,x.Z)(),{setJabatan:_,dtJabatan:v}=(0,f.Z)(),b=async a=>{let{search:e}=a;await g({search:e,tipe:"dosen"})},S=async a=>{let{search:e}=a;await _({search:e})};return(0,r.useEffect)(()=>{b({}),S({})},[o]),(0,s.jsxs)(s.Fragment,{children:[(null==v?void 0:v.data)&&(0,s.jsx)(j.Z,{label:"Jabatan",placeholder:"Pilih Jabatan",name:"jabatan_id",dataDb:null==v?void 0:v.data,body:["id","nama"],control:l,required:!0,errors:t.jabatan_id,addClass:"col-span-4"}),(0,s.jsx)(w.Z,{label:"Mulai",name:"mulai",control:l,startDate:u,setStartDate:c,required:!0,errors:t.mulai,addClass:"col-span-4 lg:col-span-2"}),(0,s.jsx)(w.Z,{label:"Selesai",name:"seles",control:l,startDate:p,setStartDate:h,addClass:"col-span-4 lg:col-span-2"})]})},v=a=>{let{showModal:e,setShowModal:t,dtEdit:n}=a,{showPegawai:i}=(0,r.useContext)(d.T),[u,w]=(0,r.useState)(""),[j,f]=(0,r.useState)(""),[x,v]=(0,r.useState)(!1),{addData:b,updateData:S}=(0,o.Z)(),{register:Z,handleSubmit:P,setValue:y,control:k,formState:{errors:D},watch:T}=(0,m.cI)(),N=()=>{y("id",""),y("jabatan_id",""),w(""),y("mulai",""),f(""),y("seles","")};(0,r.useEffect)(()=>{n?(y("id",n.id),y("jabatan_id",n.jabatan_id),y("mulai",n.mulai),w(new Date(n.mulai)),y("seles",n.seles),f(new Date(n.seles))):N()},[e,n]);let C=async a=>{if(v(!0),a.pegawai_id=null==i?void 0:i.id,console.log({row:a}),n){let{data:e}=await S(n.id,a);(0,g.Z)({event:e}),t(!1)}else{let{data:e}=await b(a);console.log({data:e}),(0,g.Z)({event:e}),(null==e?void 0:e.type)!=="success"||N()}setTimeout(()=>{v(!1)},1500)};return(0,s.jsx)(h.Z,{title:"Form RiwayatJabatan",showModal:e,setShowModal:t,children:(0,s.jsxs)("form",{onSubmit:P(C),children:[(0,s.jsx)(p.Z,{name:"id",register:Z,type:"hidden"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,s.jsx)(_,{register:Z,errors:D,dtEdit:n,control:k,watch:T,setValue:y,showModal:e,mulai:u,setMulai:w,seles:j,setSeles:f})}),(0,s.jsx)("div",{children:x?(0,s.jsx)(l.Z,{}):(0,s.jsx)(c.Z,{text:"Simpan",onClick:P(C)})})]})})},b=t(686),S=t(8919),Z=t(8350),P=()=>{let{showPegawai:a}=(0,r.useContext)(d.T),{removeData:e}=(0,o.Z)(),[t,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),[p,h]=(0,r.useState)(),[m,w]=(0,r.useState)(),[j,f]=(0,r.useState)(""),x=async a=>{let{id:t,isDelete:s}=a;if(h(t),s){let{data:a}=await e(p);(0,g.Z)({event:a}),i(!1)}else i(!0)};return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(S.Toaster,{}),(0,s.jsx)(v,{dtEdit:m,showModal:t,setShowModal:l}),(0,s.jsx)(b.Z,{showDel:n,setShowDel:i,setDelete:x}),(0,s.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{children:(0,s.jsx)("span",{className:"capitalize",children:"Silahkan Mengolah data jabatan pegawai"})})}),(0,s.jsx)("div",{children:(0,s.jsx)(c.Z,{addClass:"capitalize",text:"Tambah Jabatan",onClick:()=>{l(!0),w(null)}})})]}),(0,s.jsx)(Z.Z,{placeholder:"Cari Pegawai",onChange:a=>f(a)})]}),(0,s.jsx)(u,{setDelete:x,setEdit:a=>{l(!0),w(a)},search:j})]})}},5282:function(a,e,t){"use strict";t.d(e,{T:function(){return i}});var s=t(9268),r=t(6006),l=t(1712),n=t(8468);let i=(0,r.createContext)({showPegawai:null});e.Z=a=>{let{children:e}=a,t=parseInt(l.Z.get("user_id")),{setShowPegawai:d,showPegawai:o}=(0,n.Z)();return(0,r.useEffect)(()=>(d(t),()=>{d(0)}),[t,d]),(0,s.jsx)(i.Provider,{value:{showPegawai:o},children:e})}},8468:function(a,e,t){"use strict";var s=t(2561),r=t(4475),l=t(3415),n=t(4406);let i=(0,s.Ue)((0,r.mW)((a,e)=>({setFormData:a=>{let e=new FormData;return e.append("pangkat_id",a.pangkat_id),e.append("tipe",a.tipe),e.append("NIK",a.NIK),e.append("NIDN",a.NIDN),e.append("nama",a.nama),e.append("tempat_lahir",a.tempat_lahir),e.append("tgl_lahir",a.tgl_lahir),e.append("no_hp",a.no_hp),e.append("jumlah_anak",a.jumlah_anak),e.append("jenkel",a.jenkel),e.append("pend_terakhir",a.pend_terakhir),e.append("alamat",a.alamat),e.append("thn_terima",a.thn_terima),e.append("foto",a.foto),e},dtPegawai:[],showPegawai:[],setPegawai:async e=>{let{page:t=1,limit:s=10,search:r,tipe:i}=e;try{let e=await n.Z.getState().setToken(),d=await (0,l.Sj)({method:"get",url:"/personalia/pegawai",headers:{Authorization:"Bearer ".concat(e)},params:{limit:s,page:t,search:r,tipe:i}});return a(a=>({...a,dtPegawai:d.data.data})),{status:"berhasil",data:d.data}}catch(a){var d;return{status:"error",error:null===(d=a.response)||void 0===d?void 0:d.data}}},setShowPegawai:async e=>{try{let t=await n.Z.getState().setToken(),s=await (0,l.Sj)({method:"get",url:"/personalia/pegawai/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({...a,showPegawai:s.data.data})),{status:"berhasil",data:s.data}}catch(a){var t;return{status:"error",error:null===(t=a.response)||void 0===t?void 0:t.data}}},addData:async t=>{let s=(null==t?void 0:t.foto)?e().setFormData(t):t;try{let e=await n.Z.getState().setToken(),t=await (0,l.Sj)({method:"post",url:"/personalia/pegawai",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"},data:s});return a(a=>({dtPegawai:{last_page:a.dtPegawai.last_page,current_page:a.dtPegawai.current_page,data:[t.data.data,...a.dtPegawai.data]}})),{status:"berhasil tambah",data:t.data}}catch(a){return{status:"error",data:a.response.data}}},removeData:async e=>{try{let t=await n.Z.getState().setToken(),s=await (0,l.Sj)({method:"delete",url:"/personalia/pegawai/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({dtPegawai:{last_page:a.dtPegawai.last_page,current_page:a.dtPegawai.current_page,data:a.dtPegawai.data.filter(a=>a.id!==e)}})),{status:"berhasil hapus",data:s.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(t,s)=>{delete s.id;let r=(null==s?void 0:s.foto)?e().setFormData(s):s,i=await n.Z.getState().setToken();try{let e=await (0,l.Sj)({url:"/personalia/pegawai/".concat(t),method:"post",headers:(null==s?void 0:s.foto)?{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(i)}:{Authorization:"Bearer ".concat(i)},data:r,params:{_method:"PUT"}});return a(a=>({dtPegawai:{last_page:a.dtPegawai.last_page,current_page:a.dtPegawai.current_page,data:a.dtPegawai.data.map(a=>a.id===t?{...a,...e.data.data}:a)}})),{status:"berhasil update",data:e.data}}catch(a){return{status:"error",data:a.response.data}}},updatePegawai:async(t,s)=>{delete s.id;let r=(null==s?void 0:s.foto)?e().setFormData(s):s,i=await n.Z.getState().setToken();try{let e=await (0,l.Sj)({url:"/personalia/pegawai/".concat(t),method:"post",headers:(null==s?void 0:s.foto)?{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(i)}:{Authorization:"Bearer ".concat(i)},data:r,params:{_method:"PUT"}});return a(a=>({...a,showPegawai:e.data.data})),{status:"berhasil update",data:e.data}}catch(a){return{status:"error",data:a.response.data}}}})));e.Z=i}},function(a){a.O(0,[6680,4550,3674,1092,9700,3088,3861,7133,3729,1046,9253,7698,1744],function(){return a(a.s=3777)}),_N_E=a.O()}]);