(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7892],{2479:function(a,e,t){Promise.resolve().then(t.bind(t,1079))},1079:function(a,e,t){"use strict";t.r(e),t.d(e,{default:function(){return _}});var r=t(9268),s=t(6006),n=t(593),l=t(5437),i=t(9639),d=t(5683),o=t(5366),u=a=>{let{setDelete:e,setEdit:t,search:u}=a,{setRiwayatPekerjaan:c,dtRiwayatPekerjaan:p}=(0,d.Z)(),[m,h]=(0,s.useState)(1),[g,w]=(0,s.useState)(10),[j,k]=(0,s.useState)(!0),[x,y]=(0,s.useState)(""),{role:v}=(0,s.useContext)(o.N),b=async()=>{await c({page:m,limit:g,search:u,tipe:x}),k(!1)};(0,s.useEffect)(()=>(b(),()=>{}),[m,g]),(0,s.useEffect)(()=>{h(1),b()},[u]);let f=["No","Nama","Jabatan","Instansi","Masuk","Selesai","Aksi"];return"personalia"!==v&&f.splice(6),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:j?(0,r.jsx)(n.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)(i.Z,{headTable:f,tableBodies:["pegawai.nama","jabatan","instansi","mulai","seles"],dataTable:p.data,page:m,limit:g,setEdit:t,setDelete:e,ubah:"personalia"===v,hapus:"personalia"===v})}),(null==p?void 0:p.last_page)>1&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(l.Z,{currentPage:null==p?void 0:p.current_page,totalPages:null==p?void 0:p.last_page,setPage:h})})]})})},c=t(366),p=t(2985),m=t(7808),h=t(9442),g=t(9700),w=t(5407),j=t(4496),k=t(2743);t(6760);var x=a=>{let{register:e,errors:t,control:n,dtEdit:l,watch:i,setValue:d,showModal:o,mulai:u,setMulai:c,seles:m,setSeles:h}=a,{setPegawai:g,dtPegawai:x}=(0,k.Z)(),y=async a=>{let{search:e}=a;await g({search:e,tipe:"dosen"})};return(0,s.useEffect)(()=>{y({})},[o]),(0,r.jsxs)(r.Fragment,{children:[(null==x?void 0:x.data)&&(0,r.jsx)(j.Z,{label:"Pegawai",placeholder:"Pilih Pegawai",name:"pegawai_id",dataDb:null==x?void 0:x.data,body:["id","NIK","nama"],control:n,required:!0,errors:t.pegawai_id,addClass:"col-span-4"}),(0,r.jsx)(p.Z,{label:"Jabatan",name:"jabatan",register:e,required:!0,minLength:3,errors:t.jabatan,addClass:"col-span-4 lg:col-span-2"}),(0,r.jsx)(p.Z,{label:"Instansi",name:"instansi",register:e,required:!0,minLength:3,errors:t.instansi,addClass:"col-span-4 lg:col-span-2"}),(0,r.jsx)(w.Z,{label:"Masuk",name:"mulai",control:n,startDate:u,setStartDate:c,required:!0,errors:t.mulai,addClass:"col-span-4 lg:col-span-2"}),(0,r.jsx)(w.Z,{label:"Selesai",name:"seles",control:n,startDate:m,setStartDate:h,required:!0,errors:t.seles,addClass:"col-span-4 lg:col-span-2"})]})},y=a=>{let{showModal:e,setShowModal:t,dtEdit:l}=a,[i,o]=(0,s.useState)(""),[u,w]=(0,s.useState)(""),[j,k]=(0,s.useState)(!1),{addData:y,updateData:v}=(0,d.Z)(),{register:b,handleSubmit:f,setValue:_,control:S,formState:{errors:D},watch:Z}=(0,g.cI)(),P=()=>{_("id",""),_("pegawai_id",""),_("jabatan",""),_("instansi",""),o(""),_("mulai",""),w(""),_("seles","")};(0,s.useEffect)(()=>{l?(_("id",l.id),_("pegawai_id",l.pegawai_id),_("jabatan",l.jabatan),_("instansi",l.instansi),_("mulai",l.mulai),o(new Date(l.mulai)),_("seles",l.seles),w(new Date(l.seles))):P()},[e,l]);let N=async a=>{if(k(!0),console.log({row:a}),l){let{data:e}=await v(l.id,a);(0,h.Z)({event:e}),t(!1)}else{let{data:e}=await y(a);console.log({data:e}),(0,h.Z)({event:e}),(null==e?void 0:e.type)!=="success"||P()}setTimeout(()=>{k(!1)},1500)};return(0,r.jsx)(m.Z,{title:"Form RiwayatPekerjaan",showModal:e,setShowModal:t,children:(0,r.jsxs)("form",{onSubmit:f(N),children:[(0,r.jsx)(p.Z,{name:"id",register:b,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,r.jsx)(x,{register:b,errors:D,dtEdit:l,control:S,watch:Z,setValue:_,showModal:e,mulai:i,setMulai:o,seles:u,setSeles:w})}),(0,r.jsx)("div",{children:j?(0,r.jsx)(n.Z,{}):(0,r.jsx)(c.Z,{text:"Simpan",onClick:f(N)})})]})})},v=t(686),b=t(8919),f=t(8350),_=()=>{let{removeData:a}=(0,d.Z)(),[e,t]=(0,s.useState)(!1),[n,l]=(0,s.useState)(!1),[i,p]=(0,s.useState)(),[m,g]=(0,s.useState)(),[w,j]=(0,s.useState)(""),{role:k}=(0,s.useContext)(o.N),x=async e=>{let{id:t,isDelete:r}=e;if(p(t),r){let{data:e}=await a(i);(0,h.Z)({event:e}),l(!1)}else l(!0)};return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(b.Toaster,{}),(0,r.jsx)(y,{dtEdit:m,showModal:e,setShowModal:t}),(0,r.jsx)(v.Z,{showDel:n,setShowDel:l,setDelete:x}),"personalia"===k&&(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsx)("div",{children:(0,r.jsx)("p",{children:(0,r.jsx)("span",{className:"capitalize",children:"Silahkan Mengolah data pendidikan pegawai"})})}),(0,r.jsx)("div",{children:(0,r.jsx)(c.Z,{addClass:"capitalize",text:"Tambah Pendidikan",onClick:()=>{t(!0),g(null)}})})]}),(0,r.jsx)(f.Z,{placeholder:"Cari Pegawai",onChange:a=>j(a)})]}),(0,r.jsx)(u,{setDelete:x,setEdit:a=>{t(!0),g(a)},search:w})]})}},5407:function(a,e,t){"use strict";var r=t(9268);t(6006);var s=t(9700),n=t(9977),l=t.n(n),i=t(5326),d=t.n(i);e.Z=a=>{let{control:e,required:t,name:n,errors:i,addClass:o,label:u,startDate:c,setStartDate:p}=a;return(0,r.jsxs)("div",{className:o,children:[(0,r.jsxs)("label",{className:"text-sm font-medium text-gray-700 tracking-wide block",children:[u,t&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"})]}),(0,r.jsx)(s.Qr,{name:n,control:e,rules:{required:t},render:a=>{let{field:e}=a;return(0,r.jsx)(l(),{selected:c,onChange:a=>{if(a){p(a);let t=d()(a).format("YYYY-MM-DD");e.onChange(t)}else p(null),e.onChange("")},dateFormat:"dd/MM/yyyy",value:c||"",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"w-full border rounded-lg py-2 px-4"})}}),(null==i?void 0:i.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[u," tidak boleh kosong"]})]})}},4496:function(a,e,t){"use strict";var r=t(9268);t(6006);var s=t(7133),n=t(9700);e.Z=a=>{let{dataDb:e,body:t,control:l,required:i,name:d,errors:o,placeholder:u,addClass:c,label:p,defaultOptions:m=!0}=a,h={multiValue:(a,e)=>e.data.isFixed?{...a,backgroundColor:"gray"}:a,multiValueLabel:(a,e)=>e.data.isFixed?{...a,fontWeight:"bold",color:"white",paddingRight:6}:a,multiValueRemove:(a,e)=>e.data.isFixed?{...a,display:"none"}:a},g=(a,e)=>{let t=a[e];if("id"===e)return{value:t,label:""};if(!e.includes("."))return{value:"",label:t};{let[t,...r]=e.split("."),s=a[t];return g(s,r.join("."))}},w=()=>{let a=e&&e.map((a,e)=>{let r=t.map(e=>g(a,e)),s=r.map(a=>a.label).filter(a=>""!==a),n=s.join(s.length>1?" - ":"");return{value:r.find(a=>""!==a.value).value,label:n}});return a},j=a=>{var e;return null===(e=w())||void 0===e?void 0:e.filter(e=>e.label.toLowerCase().includes(a.toLowerCase()))},k=(a,e)=>{setTimeout(()=>{e(j(a))},1e3)};return(0,r.jsxs)("div",{className:c,children:[p&&(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:p}),i&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)(n.Qr,{name:d,control:l,rules:{required:i},render:a=>{var e;let{field:{onChange:t,value:n,ref:l}}=a;return(0,r.jsx)(s.Z,{cacheOptions:!0,defaultOptions:m,isClearable:!0,isSearchable:!0,loadOptions:k,placeholder:u,menuPlacement:"auto",menuPosition:"fixed",menuPortalTarget:document.body,styles:h,ref:l,value:(null===(e=w())||void 0===e?void 0:e.find(a=>a.value===n))||null,onChange:a=>t(a?a.value:a)})}}),(null==o?void 0:o.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[p," tidak boleh kosong"]})]})}},5366:function(a,e,t){"use strict";t.d(e,{N:function(){return l}});var r=t(9268),s=t(6006),n=t(1712);let l=(0,s.createContext)({role:null});e.Z=a=>{let{children:e}=a,[t,i]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let a=n.Z.get("role");return i(a||null),()=>{i(null)}},[]),(0,r.jsx)(l.Provider,{value:{role:t},children:e})}},2743:function(a,e,t){"use strict";var r=t(2561),s=t(4475),n=t(3415),l=t(3672);let i=(0,r.Ue)((0,s.mW)((a,e)=>({dtPegawai:[],setPegawai:async e=>{let{page:t=1,limit:r=10,search:s,tipe:l}=e;try{let e=await (0,n.hi)({method:"get",url:"/personalia/pegawai",params:{limit:r,page:t,search:s,tipe:l}});return a(a=>({...a,dtPegawai:e.data})),{status:"berhasil",data:e.data}}catch(a){return{status:"error",error:a.response.data}}},setApiDokumenPegawai:async e=>{let{search:t,page:r,id:s}=e;try{let e=await (0,n.hi)({method:"get",url:"/personalia/pegawai/dokumen/".concat(s),params:{search:t,page:r}});return l.Z.getState().setDokumen({page:r,search:t}),a(a=>({...a,dtPegawai:e.data.data})),{status:"berhasil",data:e.data}}catch(a){return{status:"error",error:a.response.data}}}})));e.Z=i},3672:function(a,e,t){"use strict";var r=t(2561),s=t(4475),n=t(3415),l=t(4406),i=t(2743);let d=(0,r.Ue)((0,s.mW)((a,e)=>({setFormData:a=>{let e=new FormData;return e.append("pegawai_id",a.pegawai_id),e.append("judul",a.judul),e.append("gambar",a.gambar),e},dtDokumen:[],showDokumen:[],setDokumen:async e=>{let{page:t=1,limit:r=10,tipe:s,search:i}=e;try{let e=await l.Z.getState().setToken(),d=await (0,n.Sj)({method:"get",url:"/personalia/dokumen_pegawai",headers:{Authorization:"Bearer ".concat(e)},params:{limit:r,page:t,search:i,tipe:s}});return a(a=>({...a,dtDokumen:d.data.data})),{status:"berhasil",data:d.data}}catch(a){var d;return{status:"error",error:null===(d=a.response)||void 0===d?void 0:d.data}}},setShowDokumen:async e=>{try{let t=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"get",url:"/personalia/dokumen_pegawai/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({...a,showDokumen:r.data.data})),{status:"berhasil",data:r.data}}catch(a){var t;return{status:"error",error:null===(t=a.response)||void 0===t?void 0:t.data}}},addData:async t=>{let r=(null==t?void 0:t.gambar)?e().setFormData(t):t;try{let e=await l.Z.getState().setToken(),s=await (0,n.Sj)({method:"post",url:"/personalia/dokumen_pegawai",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"},data:r});return a(a=>({dtDokumen:{last_page:a.dtDokumen.last_page,current_page:a.dtDokumen.current_page,data:[s.data.data,...a.dtDokumen.data]}})),i.Z.getState().setApiDokumenPegawai({id:t.pegawai_id}),{status:"berhasil tambah",data:s.data}}catch(a){return console.log({error:a}),{status:"error",data:a.response.data}}},removeData:async e=>{try{let t=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"delete",url:"/personalia/dokumen_pegawai/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({dtDokumen:{last_page:a.dtDokumen.last_page,current_page:a.dtDokumen.current_page,data:a.dtDokumen.data.filter(a=>a.id!==e)}})),i.Z.getState().setApiDokumenPegawai({id:r.data.data.pegawai_id}),{status:"berhasil hapus",data:r.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(t,r)=>{delete r.id;let s=(null==r?void 0:r.gambar)?e().setFormData(r):r,d=await l.Z.getState().setToken();try{let e=await (0,n.Sj)({url:"/personalia/dokumen_pegawai/".concat(t),method:"post",headers:(null==r?void 0:r.gambar)?{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(d)}:{Authorization:"Bearer ".concat(d)},data:s,params:{_method:"PUT"}});return a(a=>({dtDokumen:{last_page:a.dtDokumen.last_page,current_page:a.dtDokumen.current_page,data:a.dtDokumen.data.map(a=>a.id===t?{...a,...e.data.data}:a)}})),i.Z.getState().setApiDokumenPegawai({id:e.data.data.pegawai_id}),{status:"berhasil update",data:e.data}}catch(a){return{status:"error",data:a.response.data}}}})));e.Z=d},5683:function(a,e,t){"use strict";var r=t(2561),s=t(4475),n=t(3415),l=t(4406);let i=(0,r.Ue)((0,s.mW)((a,e)=>({dtRiwayatPekerjaan:[],showRiwayatPekerjaan:[],setRiwayatPekerjaan:async e=>{let{page:t=1,limit:r=10,search:s,tipe:i}=e;try{let e=await l.Z.getState().setToken(),d=await (0,n.Sj)({method:"get",url:"/personalia/riwayat_pekerjaan",headers:{Authorization:"Bearer ".concat(e)},params:{limit:r,page:t,search:s,tipe:i}});return a(a=>({...a,dtRiwayatPekerjaan:d.data.data})),{status:"berhasil",data:d.data}}catch(a){var d;return{status:"error",error:null===(d=a.response)||void 0===d?void 0:d.data}}},setShowRiwayatPekerjaan:async e=>{try{let t=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"get",url:"/personalia/riwayat_pekerjaan/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({...a,dtRiwayatPekerjaan:r.data.data})),{status:"berhasil",data:r.data}}catch(a){var t;return{status:"error",error:null===(t=a.response)||void 0===t?void 0:t.data}}},addData:async e=>{try{let t=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"post",url:"/personalia/riwayat_pekerjaan",headers:{Authorization:"Bearer ".concat(t)},data:e});return a(a=>({dtRiwayatPekerjaan:{last_page:a.dtRiwayatPekerjaan.last_page,current_page:a.dtRiwayatPekerjaan.current_page,data:[r.data.data,...a.dtRiwayatPekerjaan.data]}})),{status:"berhasil tambah",data:r.data}}catch(a){return{status:"error",data:a.response.data}}},removeData:async e=>{try{let t=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"delete",url:"/personalia/riwayat_pekerjaan/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({dtRiwayatPekerjaan:{last_page:a.dtRiwayatPekerjaan.last_page,current_page:a.dtRiwayatPekerjaan.current_page,data:a.dtRiwayatPekerjaan.data.filter(a=>a.id!==e)}})),{status:"berhasil hapus",data:r.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(e,t)=>{try{let r=await l.Z.getState().setToken(),s=await (0,n.Sj)({method:"PUT",url:"/personalia/riwayat_pekerjaan/".concat(e),headers:{Authorization:"Bearer ".concat(r)},data:t});return a(a=>({dtRiwayatPekerjaan:{last_page:a.dtRiwayatPekerjaan.last_page,current_page:a.dtRiwayatPekerjaan.current_page,data:a.dtRiwayatPekerjaan.data.map(a=>a.id===e?{...a,...s.data.data}:a)}})),{status:"berhasil update",data:s.data}}catch(a){return{status:"error",data:a.response.data}}}})));e.Z=i}},function(a){a.O(0,[6680,4550,3674,6394,2629,3088,1988,9977,7133,3729,9253,7698,1744],function(){return a(a.s=2479)}),_N_E=a.O()}]);