(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6912],{4373:function(e,a,l){Promise.resolve().then(l.bind(l,4007))},4007:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return N}});var s=l(9268),t=l(6006),i=l(593),n=l(5437),r=l(9639),d=l(7700),o=l(5366),u=e=>{let{setDelete:a,setEdit:l,search:u}=e,{setRiwayatPendidikan:c,dtRiwayatPendidikan:m}=(0,d.Z)(),[x,h]=(0,t.useState)(1),[j,p]=(0,t.useState)(10),[g,v]=(0,t.useState)(!0),[f,S]=(0,t.useState)(""),{role:b}=(0,t.useContext)(o.N),w=async()=>{await c({page:x,limit:j,search:u,tipe:f}),v(!1)};(0,t.useEffect)(()=>(w(),()=>{}),[x,j]),(0,t.useEffect)(()=>{h(1),w()},[u]);let Z=["No","Nama","Jenjang","Instansi","Masuk","Selesai","Aksi"];return"personalia"!==b&&Z.splice(6),(0,s.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:g?(0,s.jsx)(i.Z,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"",children:(0,s.jsx)(r.Z,{headTable:Z,tableBodies:["pegawai.nama","jenjang","instansi","mulai","seles"],dataTable:m.data,page:x,limit:j,setEdit:l,setDelete:a,ubah:"personalia"===b,hapus:"personalia"===b})}),(null==m?void 0:m.last_page)>1&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(n.Z,{currentPage:null==m?void 0:m.current_page,totalPages:null==m?void 0:m.last_page,setPage:h})})]})})},c=l(366),m=l(2985),x=l(7808),h=l(9442),j=l(9700),p=l(5407),g=l(1281),v=l(4496),f=l(2743);l(6760);var S=e=>{let{register:a,errors:l,control:i,dtEdit:n,watch:r,setValue:d,showModal:o,mulai:u,setMulai:c,seles:x,setSeles:h}=e,{setPegawai:j,dtPegawai:S}=(0,f.Z)(),b=async e=>{let{search:a}=e;await j({search:a,tipe:"dosen"})};return(0,t.useEffect)(()=>{b({})},[o]),(0,s.jsxs)(s.Fragment,{children:[(null==S?void 0:S.data)&&(0,s.jsx)(v.Z,{label:"Pegawai",placeholder:"Pilih Pegawai",name:"pegawai_id",dataDb:null==S?void 0:S.data,body:["id","NIK","nama"],control:i,required:!0,errors:l.pegawai_id,addClass:"col-span-4"}),(0,s.jsx)(g.u,{label:"Jenjang",name:"jenjang",options:[{label:"SD",value:"SD"},{label:"SMP",value:"SMP"},{label:"SMA/SMK",value:"SMA/SMK"},{label:"D3",value:"D3"},{label:"S1",value:"S1"},{label:"S2",value:"S2"},{label:"S3",value:"S3"}],register:a,addClass:"col-span-4 lg:col-span-1",defaultOption:"Pilih",required:!0,errors:l.jenjang}),(0,s.jsx)(m.Z,{label:"Instansi",name:"instansi",register:a,required:!0,minLength:3,errors:l.instansi,addClass:"col-span-4 lg:col-span-3"}),(0,s.jsx)(p.Z,{label:"Masuk",name:"mulai",control:i,startDate:u,setStartDate:c,required:!0,errors:l.mulai,addClass:"col-span-4 lg:col-span-2"}),(0,s.jsx)(p.Z,{label:"Selesai",name:"seles",control:i,startDate:x,setStartDate:h,required:!0,errors:l.seles,addClass:"col-span-4 lg:col-span-2"})]})},b=e=>{let{showModal:a,setShowModal:l,dtEdit:n}=e,[r,o]=(0,t.useState)(""),[u,p]=(0,t.useState)(""),[g,v]=(0,t.useState)(!1),{addData:f,updateData:b}=(0,d.Z)(),{register:w,handleSubmit:Z,setValue:C,control:N,formState:{errors:k},watch:P}=(0,j.cI)(),D=()=>{C("id",""),C("pegawai_id",""),C("jenjang",""),C("instansi",""),o(""),C("mulai",""),p(""),C("seles","")};(0,t.useEffect)(()=>{n?(C("id",n.id),C("pegawai_id",n.pegawai_id),C("jenjang",n.jenjang),C("instansi",n.instansi),C("mulai",n.mulai),o(new Date(n.mulai)),C("seles",n.seles),p(new Date(n.seles))):D()},[a,n]);let y=async e=>{if(v(!0),console.log({row:e}),n){let{data:a}=await b(n.id,e);(0,h.Z)({event:a}),l(!1)}else{let{data:a}=await f(e);console.log({data:a}),(0,h.Z)({event:a}),(null==a?void 0:a.type)!=="success"||D()}setTimeout(()=>{v(!1)},1500)};return(0,s.jsx)(x.Z,{title:"Form RiwayatPendidikan",showModal:a,setShowModal:l,children:(0,s.jsxs)("form",{onSubmit:Z(y),children:[(0,s.jsx)(m.Z,{name:"id",register:w,type:"hidden"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,s.jsx)(S,{register:w,errors:k,dtEdit:n,control:N,watch:P,setValue:C,showModal:a,mulai:r,setMulai:o,seles:u,setSeles:p})}),(0,s.jsx)("div",{children:g?(0,s.jsx)(i.Z,{}):(0,s.jsx)(c.Z,{text:"Simpan",onClick:Z(y)})})]})})},w=l(686),Z=l(8919),C=l(8350),N=()=>{let{removeData:e}=(0,d.Z)(),[a,l]=(0,t.useState)(!1),[i,n]=(0,t.useState)(!1),[r,m]=(0,t.useState)(),[x,j]=(0,t.useState)(),[p,g]=(0,t.useState)(""),{role:v}=(0,t.useContext)(o.N),f=async a=>{let{id:l,isDelete:s}=a;if(m(l),s){let{data:a}=await e(r);(0,h.Z)({event:a}),n(!1)}else n(!0)};return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(Z.Toaster,{}),(0,s.jsx)(b,{dtEdit:x,showModal:a,setShowModal:l}),(0,s.jsx)(w.Z,{showDel:i,setShowDel:n,setDelete:f}),"personalia"===v&&(0,s.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{children:(0,s.jsx)("span",{className:"capitalize",children:"Silahkan Mengolah data pendidikan pegawai"})})}),(0,s.jsx)("div",{children:(0,s.jsx)(c.Z,{addClass:"capitalize",text:"Tambah Pendidikan",onClick:()=>{l(!0),j(null)}})})]}),(0,s.jsx)(C.Z,{placeholder:"Cari Pegawai",onChange:e=>g(e)})]}),(0,s.jsx)(u,{setDelete:f,setEdit:e=>{l(!0),j(e)},search:p})]})}},4496:function(e,a,l){"use strict";var s=l(9268);l(6006);var t=l(7133),i=l(9700);a.Z=e=>{let{dataDb:a,body:l,control:n,required:r,name:d,errors:o,placeholder:u,addClass:c,label:m,defaultOptions:x=!0}=e,h={multiValue:(e,a)=>a.data.isFixed?{...e,backgroundColor:"gray"}:e,multiValueLabel:(e,a)=>a.data.isFixed?{...e,fontWeight:"bold",color:"white",paddingRight:6}:e,multiValueRemove:(e,a)=>a.data.isFixed?{...e,display:"none"}:e},j=(e,a)=>{let l=e[a];if("id"===a)return{value:l,label:""};if(!a.includes("."))return{value:"",label:l};{let[l,...s]=a.split("."),t=e[l];return j(t,s.join("."))}},p=()=>{let e=a&&a.map((e,a)=>{let s=l.map(a=>j(e,a)),t=s.map(e=>e.label).filter(e=>""!==e),i=t.join(t.length>1?" - ":"");return{value:s.find(e=>""!==e.value).value,label:i}});return e},g=e=>{var a;return null===(a=p())||void 0===a?void 0:a.filter(a=>a.label.toLowerCase().includes(e.toLowerCase()))},v=(e,a)=>{setTimeout(()=>{a(g(e))},1e3)};return(0,s.jsxs)("div",{className:c,children:[m&&(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:m}),r&&(0,s.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,s.jsx)(i.Qr,{name:d,control:n,rules:{required:r},render:e=>{var a;let{field:{onChange:l,value:i,ref:n}}=e;return(0,s.jsx)(t.Z,{cacheOptions:!0,defaultOptions:x,isClearable:!0,isSearchable:!0,loadOptions:v,placeholder:u,menuPlacement:"auto",menuPosition:"fixed",menuPortalTarget:document.body,styles:h,ref:n,value:(null===(a=p())||void 0===a?void 0:a.find(e=>e.value===i))||null,onChange:e=>l(e?e.value:e)})}}),(null==o?void 0:o.type)==="required"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[m," tidak boleh kosong"]})]})}},5366:function(e,a,l){"use strict";l.d(a,{N:function(){return n}});var s=l(9268),t=l(6006),i=l(1712);let n=(0,t.createContext)({role:null});a.Z=e=>{let{children:a}=e,[l,r]=(0,t.useState)(null);return(0,t.useEffect)(()=>{let e=i.Z.get("role");return r(e||null),()=>{r(null)}},[]),(0,s.jsx)(n.Provider,{value:{role:l},children:a})}}},function(e){e.O(0,[6680,4550,3674,1092,9700,3088,3861,7133,3729,6758,9253,7698,1744],function(){return e(e.s=4373)}),_N_E=e.O()}]);