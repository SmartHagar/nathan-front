(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3856],{5113:function(e,a,t){Promise.resolve().then(t.bind(t,1015))},1015:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return S}});var r=t(9268),n=t(6006),i=t(593),l=t(5437),o=t(9639),s=t(5366),d=t(3672),u=e=>{let{setDelete:a,setEdit:t,search:u,tipe:c}=e,{setDokumen:p,dtDokumen:g}=(0,d.Z)(),[h,m]=(0,n.useState)(1),[w,f]=(0,n.useState)(10),[v,b]=(0,n.useState)(!0),{role:y}=(0,n.useContext)(s.N),j=async()=>{await p({page:h,search:u,limit:w}),b(!1)};(0,n.useEffect)(()=>(j(),()=>{}),[h,w]),(0,n.useEffect)(()=>{m(1),j()},[u]);let x=["No","Nama","Judul","Gambar / File","Aksi"];return"personalia"!==y&&x.splice(4),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:v?(0,r.jsx)(i.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)(o.Z,{headTable:x,tableBodies:["pegawai.nama","judul","gambar"],dataTable:g.data,page:h,limit:w,setEdit:t,setDelete:a,ubah:"personalia"===y,hapus:"personalia"===y})}),(null==g?void 0:g.last_page)>1&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(l.Z,{currentPage:null==g?void 0:g.current_page,totalPages:null==g?void 0:g.last_page,setPage:m})})]})})},c=t(366),p=t(2985),g=t(7808),h=t(9442),m=t(9700),w=t(63),f=t(4496),v=t(2743);t(6760);var b=e=>{let{register:a,errors:t,control:i,dtEdit:l,watch:o,setValue:s,showModal:d,myFile:u,setMyFile:c}=e,{setPegawai:g,dtPegawai:h}=(0,v.Z)(),m=async e=>{let{search:a}=e;await g({search:a})};return(0,n.useEffect)(()=>{m({})},[d]),(0,r.jsxs)(r.Fragment,{children:[(null==h?void 0:h.data)&&(0,r.jsx)(f.Z,{label:"Pegawai",placeholder:"Pilih Pegawai",name:"pegawai_id",dataDb:null==h?void 0:h.data,body:["id","NIK","nama"],control:i,required:!0,errors:t.pegawai_id,addClass:"col-span-4"}),(0,r.jsx)(p.Z,{label:"Judul",name:"judul",register:a,required:!0,minLength:3,errors:t.judul,addClass:"col-span-4"}),(0,r.jsx)(w.Z,{label:"Gambar",name:"gambar",register:a,accept:"image/*, .pdf",required:!0,errors:t.gambar,addClass:"col-span-4",setValue:s,fileEdit:null==l?void 0:l.gambar,myFile:u,setMyFile:c})]})},y=t(5282),j=e=>{let{showModal:a,setShowModal:t,dtEdit:l,tipe:o}=e,{showPegawai:s}=(0,n.useContext)(y.T),[u,w]=(0,n.useState)(),[f,v]=(0,n.useState)(!1),{addData:j,updateData:x}=(0,d.Z)(),{register:k,handleSubmit:_,setValue:S,control:D,formState:{errors:P},watch:Z}=(0,m.cI)(),N=()=>{S("id",""),S("judul",""),S("gambar",""),S("pegawai_id","")};(0,n.useEffect)(()=>{l?(S("id",l.id),S("judul",l.judul),S("pegawai_id",l.pegawai_id),S("gambar",l.gambar)):N()},[a,l]);let T=async e=>{if(v(!0),console.log({row:e}),l){let{data:a}=await x(l.id,e);(0,h.Z)({event:a}),t(!1)}else{let{data:a}=await j(e);console.log({data:a}),(0,h.Z)({event:a}),(null==a?void 0:a.type)!=="success"||N()}setTimeout(()=>{v(!1)},1500)};return(0,r.jsx)(g.Z,{title:"Form Dokumen",showModal:a,setShowModal:t,children:(0,r.jsxs)("form",{onSubmit:_(T),children:[(0,r.jsx)(p.Z,{name:"id",register:k,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,r.jsx)(b,{register:k,errors:P,dtEdit:l,control:D,watch:Z,setValue:S,showModal:a,myFile:u,setMyFile:w})}),(0,r.jsx)("div",{children:f?(0,r.jsx)(i.Z,{}):(0,r.jsx)(c.Z,{text:"Simpan",onClick:_(T)})})]})})},x=t(686),k=t(8919),_=t(8350),S=e=>{let{params:a}=e,{showPegawai:t}=(0,n.useContext)(y.T),{removeData:i}=(0,d.Z)(),[l,o]=(0,n.useState)(!1),[p,g]=(0,n.useState)(!1),[m,w]=(0,n.useState)(),[f,v]=(0,n.useState)(),[b,S]=(0,n.useState)(""),{role:D}=(0,n.useContext)(s.N),P=async e=>{let{id:a,isDelete:t}=e;if(w(a),t){let{data:e}=await i(m);(0,h.Z)({event:e}),g(!1)}else g(!0)};return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(k.Toaster,{}),(0,r.jsx)(j,{dtEdit:f,showModal:l,setShowModal:o,tipe:a.tipe}),(0,r.jsx)(x.Z,{showDel:p,setShowDel:g,setDelete:P}),"personalia"===D&&(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsxs)("p",{className:"capitalize",children:["Silahkan Mengolah data Dokumen ",a.tipe]}),(0,r.jsx)("div",{children:(0,r.jsx)(c.Z,{text:"Tambah Dokumen",onClick:()=>{o(!0),v(null)}})})]}),(0,r.jsx)(_.Z,{placeholder:"Cari Dokumen",onChange:e=>S(e)})]}),(0,r.jsx)(u,{setDelete:P,setEdit:e=>{o(!0),v(e)},search:b,tipe:a.tipe})]})}},63:function(e,a,t){"use strict";var r=t(9268),n=t(3415),i=t(6394),l=t.n(i),o=t(6006),s=t(5883),d=t.n(s);a.Z=e=>{let{label:a,register:t,required:i,name:s,errors:u,addClass:c,accept:p,setValue:g,fileEdit:h,myFile:m,setMyFile:w}=e,[f,v]=(0,o.useState)(),b=e=>new Promise(()=>{if(e){var a;let t=(null==e?void 0:null===(a=e.type)||void 0===a?void 0:a.split("/"))||[],r=t[0];if("image"!==r)return y(e);console.log({splitType:t}),d().imageFileResizer(e,1500,1500,t[1],80,0,e=>{y(e)},"file")}else y(null)}),y=e=>{var a;if(e){let a=new FileReader;a.readAsDataURL(e),a.onloadend=()=>{w(a.result)}}let t=(null==e?void 0:null===(a=e.type)||void 0===a?void 0:a.split("/"))||[];v(t[0]),g(s,e)};return(0,r.jsxs)("div",{className:c,children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),i&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",id:"fileInput",type:"file",accept:p,onChange:e=>{var a;let t=(null===(a=e.target)||void 0===a?void 0:a.files[0])||null;b(t)}}),(0,r.jsx)("input",{type:"hidden",id:a,...t(s,{required:i})}),(0,r.jsxs)("div",{className:"flex gap-4 mt-2",children:[m&&"image"===f&&(0,r.jsx)(l(),{className:"rounded-lg",src:m,width:100,height:100,alt:""}),h&&"file"!==s&&(0,r.jsx)("div",{children:(0,r.jsx)(l(),{src:"".concat(n._n,"/").concat(h),width:100,height:100,alt:""})})]}),(null==u?void 0:u.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kosong"]})]})}},4496:function(e,a,t){"use strict";var r=t(9268);t(6006);var n=t(7133),i=t(9700);a.Z=e=>{let{dataDb:a,body:t,control:l,required:o,name:s,errors:d,placeholder:u,addClass:c,label:p,defaultOptions:g=!0}=e,h={multiValue:(e,a)=>a.data.isFixed?{...e,backgroundColor:"gray"}:e,multiValueLabel:(e,a)=>a.data.isFixed?{...e,fontWeight:"bold",color:"white",paddingRight:6}:e,multiValueRemove:(e,a)=>a.data.isFixed?{...e,display:"none"}:e},m=(e,a)=>{let t=e[a];if("id"===a)return{value:t,label:""};if(!a.includes("."))return{value:"",label:t};{let[t,...r]=a.split("."),n=e[t];return m(n,r.join("."))}},w=()=>{let e=a&&a.map((e,a)=>{let r=t.map(a=>m(e,a)),n=r.map(e=>e.label).filter(e=>""!==e),i=n.join(n.length>1?" - ":"");return{value:r.find(e=>""!==e.value).value,label:i}});return e},f=e=>{var a;return null===(a=w())||void 0===a?void 0:a.filter(a=>a.label.toLowerCase().includes(e.toLowerCase()))},v=(e,a)=>{setTimeout(()=>{a(f(e))},1e3)};return(0,r.jsxs)("div",{className:c,children:[p&&(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:p}),o&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)(i.Qr,{name:s,control:l,rules:{required:o},render:e=>{var a;let{field:{onChange:t,value:i,ref:l}}=e;return(0,r.jsx)(n.Z,{cacheOptions:!0,defaultOptions:g,isClearable:!0,isSearchable:!0,loadOptions:v,placeholder:u,menuPlacement:"auto",menuPosition:"fixed",menuPortalTarget:document.body,styles:h,ref:l,value:(null===(a=w())||void 0===a?void 0:a.find(e=>e.value===i))||null,onChange:e=>t(e?e.value:e)})}}),(null==d?void 0:d.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[p," tidak boleh kosong"]})]})}},5282:function(e,a,t){"use strict";t.d(a,{T:function(){return o}});var r=t(9268),n=t(6006),i=t(1712),l=t(8468);let o=(0,n.createContext)({showPegawai:null});a.Z=e=>{let{children:a}=e,t=parseInt(i.Z.get("user_id")),{setShowPegawai:s,showPegawai:d}=(0,l.Z)();return(0,n.useEffect)(()=>(s(t),()=>{s(0)}),[t,s]),(0,r.jsx)(o.Provider,{value:{showPegawai:d},children:a})}},5366:function(e,a,t){"use strict";t.d(a,{N:function(){return l}});var r=t(9268),n=t(6006),i=t(1712);let l=(0,n.createContext)({role:null});a.Z=e=>{let{children:a}=e,[t,o]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=i.Z.get("role");return o(e||null),()=>{o(null)}},[]),(0,r.jsx)(l.Provider,{value:{role:t},children:a})}},2743:function(e,a,t){"use strict";var r=t(2561),n=t(4475),i=t(3415),l=t(3672);let o=(0,r.Ue)((0,n.mW)((e,a)=>({dtPegawai:[],setPegawai:async a=>{let{page:t=1,limit:r=10,search:n,tipe:l}=a;try{let a=await (0,i.hi)({method:"get",url:"/personalia/pegawai",params:{limit:r,page:t,search:n,tipe:l}});return e(e=>({...e,dtPegawai:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setApiDokumenPegawai:async a=>{let{search:t,page:r,id:n}=a;try{let a=await (0,i.hi)({method:"get",url:"/personalia/pegawai/dokumen/".concat(n),params:{search:t,page:r}});return l.Z.getState().setDokumen({page:r,search:t}),e(e=>({...e,dtPegawai:a.data.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}}})));a.Z=o},3672:function(e,a,t){"use strict";var r=t(2561),n=t(4475),i=t(3415),l=t(4406),o=t(2743);let s=(0,r.Ue)((0,n.mW)((e,a)=>({setFormData:e=>{let a=new FormData;return a.append("pegawai_id",e.pegawai_id),a.append("judul",e.judul),a.append("gambar",e.gambar),a},dtDokumen:[],showDokumen:[],setDokumen:async a=>{let{page:t=1,limit:r=10,tipe:n,search:o}=a;try{let a=await l.Z.getState().setToken(),s=await (0,i.Sj)({method:"get",url:"/personalia/dokumen_pegawai",headers:{Authorization:"Bearer ".concat(a)},params:{limit:r,page:t,search:o,tipe:n}});return e(e=>({...e,dtDokumen:s.data.data})),{status:"berhasil",data:s.data}}catch(e){var s;return{status:"error",error:null===(s=e.response)||void 0===s?void 0:s.data}}},setShowDokumen:async a=>{try{let t=await l.Z.getState().setToken(),r=await (0,i.Sj)({method:"get",url:"/personalia/dokumen_pegawai/".concat(a),headers:{Authorization:"Bearer ".concat(t)}});return e(e=>({...e,showDokumen:r.data.data})),{status:"berhasil",data:r.data}}catch(e){var t;return{status:"error",error:null===(t=e.response)||void 0===t?void 0:t.data}}},addData:async t=>{let r=(null==t?void 0:t.gambar)?a().setFormData(t):t;try{let a=await l.Z.getState().setToken(),n=await (0,i.Sj)({method:"post",url:"/personalia/dokumen_pegawai",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"multipart/form-data"},data:r});return e(e=>({dtDokumen:{last_page:e.dtDokumen.last_page,current_page:e.dtDokumen.current_page,data:[n.data.data,...e.dtDokumen.data]}})),o.Z.getState().setApiDokumenPegawai({id:t.pegawai_id}),{status:"berhasil tambah",data:n.data}}catch(e){return console.log({error:e}),{status:"error",data:e.response.data}}},removeData:async a=>{try{let t=await l.Z.getState().setToken(),r=await (0,i.Sj)({method:"delete",url:"/personalia/dokumen_pegawai/".concat(a),headers:{Authorization:"Bearer ".concat(t)}});return e(e=>({dtDokumen:{last_page:e.dtDokumen.last_page,current_page:e.dtDokumen.current_page,data:e.dtDokumen.data.filter(e=>e.id!==a)}})),o.Z.getState().setApiDokumenPegawai({id:r.data.data.pegawai_id}),{status:"berhasil hapus",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(t,r)=>{delete r.id;let n=(null==r?void 0:r.gambar)?a().setFormData(r):r,s=await l.Z.getState().setToken();try{let a=await (0,i.Sj)({url:"/personalia/dokumen_pegawai/".concat(t),method:"post",headers:(null==r?void 0:r.gambar)?{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(s)}:{Authorization:"Bearer ".concat(s)},data:n,params:{_method:"PUT"}});return e(e=>({dtDokumen:{last_page:e.dtDokumen.last_page,current_page:e.dtDokumen.current_page,data:e.dtDokumen.data.map(e=>e.id===t?{...e,...a.data.data}:e)}})),o.Z.getState().setApiDokumenPegawai({id:a.data.data.pegawai_id}),{status:"berhasil update",data:a.data}}catch(e){return{status:"error",data:e.response.data}}}})));a.Z=s},8468:function(e,a,t){"use strict";var r=t(2561),n=t(4475),i=t(3415),l=t(4406);let o=(0,r.Ue)((0,n.mW)((e,a)=>({setFormData:e=>{let a=new FormData;return a.append("pangkat_id",e.pangkat_id),a.append("tipe",e.tipe),a.append("NIK",e.NIK),a.append("NIDN",e.NIDN),a.append("nama",e.nama),a.append("tempat_lahir",e.tempat_lahir),a.append("tgl_lahir",e.tgl_lahir),a.append("no_hp",e.no_hp),a.append("jumlah_anak",e.jumlah_anak),a.append("jenkel",e.jenkel),a.append("pend_terakhir",e.pend_terakhir),a.append("alamat",e.alamat),a.append("thn_terima",e.thn_terima),a.append("foto",e.foto),a},dtPegawai:[],showPegawai:[],setPegawai:async a=>{let{page:t=1,limit:r=10,search:n,tipe:o}=a;try{let a=await l.Z.getState().setToken(),s=await (0,i.Sj)({method:"get",url:"/personalia/pegawai",headers:{Authorization:"Bearer ".concat(a)},params:{limit:r,page:t,search:n,tipe:o}});return e(e=>({...e,dtPegawai:s.data.data})),{status:"berhasil",data:s.data}}catch(e){var s;return{status:"error",error:null===(s=e.response)||void 0===s?void 0:s.data}}},setShowPegawai:async a=>{try{let t=await l.Z.getState().setToken(),r=await (0,i.Sj)({method:"get",url:"/personalia/pegawai/".concat(a),headers:{Authorization:"Bearer ".concat(t)}});return e(e=>({...e,showPegawai:r.data.data})),{status:"berhasil",data:r.data}}catch(e){var t;return{status:"error",error:null===(t=e.response)||void 0===t?void 0:t.data}}},addData:async t=>{let r=(null==t?void 0:t.foto)?a().setFormData(t):t;try{let a=await l.Z.getState().setToken(),t=await (0,i.Sj)({method:"post",url:"/personalia/pegawai",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"multipart/form-data"},data:r});return e(e=>({dtPegawai:{last_page:e.dtPegawai.last_page,current_page:e.dtPegawai.current_page,data:[t.data.data,...e.dtPegawai.data]}})),{status:"berhasil tambah",data:t.data}}catch(e){return{status:"error",data:e.response.data}}},removeData:async a=>{try{let t=await l.Z.getState().setToken(),r=await (0,i.Sj)({method:"delete",url:"/personalia/pegawai/".concat(a),headers:{Authorization:"Bearer ".concat(t)}});return e(e=>({dtPegawai:{last_page:e.dtPegawai.last_page,current_page:e.dtPegawai.current_page,data:e.dtPegawai.data.filter(e=>e.id!==a)}})),{status:"berhasil hapus",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(t,r)=>{delete r.id;let n=(null==r?void 0:r.foto)?a().setFormData(r):r,o=await l.Z.getState().setToken();try{let a=await (0,i.Sj)({url:"/personalia/pegawai/".concat(t),method:"post",headers:(null==r?void 0:r.foto)?{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(o)}:{Authorization:"Bearer ".concat(o)},data:n,params:{_method:"PUT"}});return e(e=>({dtPegawai:{last_page:e.dtPegawai.last_page,current_page:e.dtPegawai.current_page,data:e.dtPegawai.data.map(e=>e.id===t?{...e,...a.data.data}:e)}})),{status:"berhasil update",data:a.data}}catch(e){return{status:"error",data:e.response.data}}}})));a.Z=o},5883:function(e){(()=>{"use strict";var a={d:(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};a.r(t),a.d(t,{default:()=>n});var r=function(){var e;function a(){!function(e,a){if(!(e instanceof a))throw TypeError("Cannot call a class as a function")}(this,a)}return e=[{key:"changeHeightWidth",value:function(e,a,t,r,n,i){return t>r&&(e=Math.round(e*r/t),t=r),e>a&&(t=Math.round(t*a/e),e=a),n&&t<n&&(e=Math.round(e*n/t),t=n),i&&e<i&&(t=Math.round(t*i/e),e=i),{height:e,width:t}}},{key:"resizeAndRotateImage",value:function(e,a,t,r,n){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=document.createElement("canvas"),d=e.width,u=e.height,c=this.changeHeightWidth(u,t,d,a,r,n);o&&(90===o||270===o)?(s.width=c.height,s.height=c.width):(s.width=c.width,s.height=c.height),d=c.width,u=c.height;var p=s.getContext("2d");return p.fillStyle="rgba(0, 0, 0, 0)",p.fillRect(0,0,d,u),p.imageSmoothingEnabled&&p.imageSmoothingQuality&&(p.imageSmoothingQuality="high"),o&&(p.rotate(o*Math.PI/180),90===o?p.translate(0,-s.width):180===o?p.translate(-s.width,-s.height):270===o?p.translate(-s.height,0):0!==o&&360!==o||p.translate(0,0)),p.drawImage(e,0,0,d,u),s.toDataURL("image/".concat(i),l/100)}},{key:"b64toByteArrays",value:function(e,a){a=a||"image/jpeg";for(var t=atob(e.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),r=[],n=0;n<t.length;n+=512){for(var i=t.slice(n,n+512),l=Array(i.length),o=0;o<i.length;o++)l[o]=i.charCodeAt(o);var s=new Uint8Array(l);r.push(s)}return r}},{key:"b64toBlob",value:function(e,a){var t=this.b64toByteArrays(e,a);return new Blob(t,{type:a,lastModified:new Date})}},{key:"b64toFile",value:function(e,a,t){var r=this.b64toByteArrays(e,t);return new File(r,a,{type:t,lastModified:new Date})}},{key:"createResizedImage",value:function(e,t,r,n,i,l,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,c=new FileReader;if(!e)throw Error("File Not Found!");if(e.type&&!e.type.includes("image"))throw Error("File Is NOT Image!");c.readAsDataURL(e),c.onload=function(){var p=new Image;p.src=c.result,p.onload=function(){var c=a.resizeAndRotateImage(p,t,r,d,u,n,i,l),g="image/".concat(n);switch(s){case"blob":o(a.b64toBlob(c,g));break;case"base64":default:o(c);break;case"file":var h=e.name.toString().replace(/(png|jpeg|jpg|webp)$/i,"").concat(n.toString());o(a.b64toFile(c,h,g))}}},c.onerror=function(e){throw Error(e)}}}],function(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(a,e),a}();let n={imageFileResizer:function(e,a,t,n,i,l,o,s,d,u){return r.createResizedImage(e,a,t,n,i,l,o,s,d,u)}};e.exports=t})()}},function(e){e.O(0,[6680,4550,3674,6394,2629,3088,1988,7133,3729,9253,7698,1744],function(){return e(e.s=5113)}),_N_E=e.O()}]);