(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7638],{8400:function(e,t,a){Promise.resolve().then(a.bind(a,3508))},3508:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return F}});var r=a(9268),l=a(6006),s=a(593),n=a(5437),i=a(9639),o=a(2561),d=a(4475),u=a(3415),c=a(4406);let h=(0,o.Ue)((0,d.mW)((e,t)=>({setFormData:e=>{let t=new FormData;return t.append("jenis_id",e.jenis_id),t.append("tipe",e.tipe),t.append("no_surat",e.no_surat),t.append("tgl_surat",e.tgl_surat),t.append("hal",e.hal),t.append("status",e.status),t.append("dari_ke",e.dari_ke),t.append("gambar",e.gambar),t},dtSurat:[],showSurat:[],setSurat:async t=>{let{page:a=1,limit:r=10,tipe:l,search:s}=t;try{let t=await c.Z.getState().setToken(),n=await (0,u.Sj)({method:"get",url:"/tata_usaha/surat",headers:{Authorization:"Bearer ".concat(t)},params:{limit:r,page:a,search:s,tipe:l}});return e(e=>({...e,dtSurat:n.data.data})),{status:"berhasil",data:n.data}}catch(e){var n;return{status:"error",error:null===(n=e.response)||void 0===n?void 0:n.data}}},setShowSurat:async t=>{try{let a=await c.Z.getState().setToken(),r=await (0,u.Sj)({method:"get",url:"/tata_usaha/surat/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return e(e=>({...e,showSurat:r.data.data})),{status:"berhasil",data:r.data}}catch(e){var a;return{status:"error",error:null===(a=e.response)||void 0===a?void 0:a.data}}},addData:async a=>{let r=(null==a?void 0:a.gambar)?t().setFormData(a):a;try{let t=await c.Z.getState().setToken(),a=await (0,u.Sj)({method:"post",url:"/tata_usaha/surat",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"multipart/form-data"},data:r});return e(e=>({dtSurat:{last_page:e.dtSurat.last_page,current_page:e.dtSurat.current_page,data:[a.data.data,...e.dtSurat.data]}})),{status:"berhasil tambah",data:a.data}}catch(e){return{status:"error",data:e.response.data}}},removeData:async t=>{try{let a=await c.Z.getState().setToken(),r=await (0,u.Sj)({method:"delete",url:"/tata_usaha/surat/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return e(e=>({dtSurat:{last_page:e.dtSurat.last_page,current_page:e.dtSurat.current_page,data:e.dtSurat.data.filter(e=>e.id!==t)}})),{status:"berhasil hapus",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(a,r)=>{delete r.id;let l=(null==r?void 0:r.gambar)?t().setFormData(r):r,s=await c.Z.getState().setToken();try{let t=await (0,u.Sj)({url:"/tata_usaha/surat/".concat(a),method:"post",headers:(null==r?void 0:r.gambar)?{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(s)}:{Authorization:"Bearer ".concat(s)},data:l,params:{_method:"PUT"}});return e(e=>({dtSurat:{last_page:e.dtSurat.last_page,current_page:e.dtSurat.current_page,data:e.dtSurat.data.map(e=>e.id===a?{...e,...t.data.data}:e)}})),{status:"berhasil update",data:t.data}}catch(e){return{status:"error",data:e.response.data}}}})));var g=a(5366),m=e=>{let{setDelete:t,setEdit:a,search:o,tipe:d}=e,{setSurat:u,dtSurat:c}=h(),[m,p]=(0,l.useState)(1),[f,v]=(0,l.useState)(10),[b,x]=(0,l.useState)(!0),{role:j}=(0,l.useContext)(g.N),y=async()=>{await u({page:m,limit:f,search:o,tipe:d}),x(!1)};(0,l.useEffect)(()=>(y(),()=>{}),[m,f]),(0,l.useEffect)(()=>{p(1),y()},[o]);let w=["No","Jenis Surat","Hal","Dari","Status","Tgl Surat","Gambar / File","Aksi"];return"personalia"===j&&w.splice(w.length-1),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:b?(0,r.jsx)(s.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)(i.Z,{headTable:w,tableBodies:["jenis.nama","hal","dari_ke","status","tgl_surat","gambar"],dataTable:c.data,page:m,limit:f,setEdit:a,setDelete:t,ubah:"personalia"!==j,hapus:"personalia"!==j})}),(null==c?void 0:c.last_page)>1&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(n.Z,{currentPage:null==c?void 0:c.current_page,totalPages:null==c?void 0:c.last_page,setPage:p})})]})})},p=a(366),f=a(2985),v=a(7808),b=a(9442),x=a(9700),j=a(5407),y=a(63),w=a(1281),S=a(4496);let _=(0,o.Ue)((0,d.mW)((e,t)=>({dtJenis:[],setJenis:async t=>{let{page:a=1,limit:r=10,search:l}=t;try{let t=await (0,u.hi)({method:"get",url:"/surat/jenis/all",params:{limit:r,page:a,search:l}});return e(e=>({...e,dtJenis:t.data})),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}}})));a(6760);var k=e=>{let{register:t,errors:a,control:s,dtEdit:n,watch:i,setValue:o,showModal:d,tglSurat:u,setTglSurat:c,myFile:h,setMyFile:g}=e,{setJenis:m,dtJenis:p}=_(),v=async e=>{let{search:t}=e;await m({search:t})};return(0,l.useEffect)(()=>{v({})},[d]),(0,r.jsxs)(r.Fragment,{children:[(null==p?void 0:p.data)&&(0,r.jsx)(S.Z,{label:"Jenis Surat",placeholder:"Pilih Jenis Surat",name:"jenis_id",dataDb:null==p?void 0:p.data,body:["id","nama"],control:s,required:!0,errors:a.jenis_id,addClass:"col-span-4"}),(0,r.jsx)(f.Z,{label:"No. Surat",name:"no_surat",register:t,required:!0,errors:a.no_surat,addClass:"col-span-4"}),(0,r.jsx)(j.Z,{name:"tgl_surat",control:s,startDate:u,setStartDate:c,label:"Tgl. Surat",required:!0,errors:a.tgl_surat,addClass:"col-span-4 lg:col-span-2"}),(0,r.jsx)(f.Z,{label:"Dari Ke",name:"dari_ke",register:t,required:!0,minLength:3,errors:a.dari_ke,addClass:"col-span-4 lg:col-span-2"}),(0,r.jsx)(f.Z,{label:"Hal",name:"hal",register:t,required:!0,minLength:3,errors:a.hal,addClass:"col-span-4"}),(0,r.jsx)(w.u,{label:"Status",defaultOption:"Pilih Status",register:t,errors:a,name:"status",options:[{value:"proses",label:"Proses"},{value:"sukses",label:"Sukses"}],addClass:"col-span-4"}),(0,r.jsx)(y.Z,{label:"Gambar",name:"gambar",register:t,accept:"image/*, .pdf",required:!0,errors:a.gambar,addClass:"col-span-4",setValue:o,fileEdit:null==n?void 0:n.gambar,myFile:h,setMyFile:g})]})},N=e=>{let{showModal:t,setShowModal:a,dtEdit:n,tipe:i}=e,[o,d]=(0,l.useState)(""),[u,c]=(0,l.useState)(),[g,m]=(0,l.useState)(!1),{addData:j,updateData:y}=h(),{register:w,handleSubmit:S,setValue:_,control:N,formState:{errors:C},watch:Z}=(0,x.cI)(),D=()=>{_("id",""),_("jenis_id",""),_("no_surat",""),_("tipe",i),d(""),_("tgl_surat",""),_("hal",""),_("dari_ke",""),_("gambar","")};(0,l.useEffect)(()=>{n?(_("id",n.id),_("no_surat",n.no_surat),_("jenis_id",parseInt(n.jenis_id)),_("tipe",n.tipe),_("tgl_surat",n.tgl_surat),d(new Date(n.tgl_surat)),_("hal",n.hal),_("status",n.status),_("dari_ke",n.dari_ke),_("gambar",n.gambar)):D()},[t,n]);let F=async e=>{if(m(!0),console.log({row:e}),n){let{data:t}=await y(n.id,e);(0,b.Z)({event:t}),a(!1)}else{let{data:t}=await j(e);console.log({data:t}),(0,b.Z)({event:t}),(null==t?void 0:t.type)!=="success"||D()}setTimeout(()=>{m(!1)},1500)};return(0,r.jsx)(v.Z,{title:"Form Surat",showModal:t,setShowModal:a,children:(0,r.jsxs)("form",{onSubmit:S(F),children:[(0,r.jsx)(f.Z,{name:"id",register:w,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,r.jsx)(k,{register:w,errors:C,dtEdit:n,control:N,watch:Z,setValue:_,showModal:t,tglSurat:o,setTglSurat:d,myFile:u,setMyFile:c})}),(0,r.jsx)("div",{children:g?(0,r.jsx)(s.Z,{}):(0,r.jsx)(p.Z,{text:"Simpan",onClick:S(F)})})]})})},C=a(686),Z=a(8919),D=a(8350),F=e=>{let{params:t}=e,{removeData:a}=h(),[s,n]=(0,l.useState)(!1),[i,o]=(0,l.useState)(!1),[d,u]=(0,l.useState)(),[c,f]=(0,l.useState)(),[v,x]=(0,l.useState)(""),{role:j}=(0,l.useContext)(g.N),y=async e=>{let{id:t,isDelete:r}=e;if(u(t),r){let{data:e}=await a(d);(0,b.Z)({event:e}),o(!1)}else o(!0)};return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(Z.Toaster,{}),(0,r.jsx)(N,{dtEdit:c,showModal:s,setShowModal:n,tipe:t.tipe}),(0,r.jsx)(C.Z,{showDel:i,setShowDel:o,setDelete:y}),"personalia"!==j&&(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsxs)("p",{className:"capitalize",children:["Silahkan Mengolah data Surat ",t.tipe]}),(0,r.jsx)("div",{children:(0,r.jsx)(p.Z,{text:"Tambah Surat",onClick:()=>{n(!0),f(null)}})})]}),(0,r.jsx)(D.Z,{placeholder:"Cari Surat",onChange:e=>x(e)})]}),(0,r.jsx)(m,{setDelete:y,setEdit:e=>{n(!0),f(e)},search:v,tipe:t.tipe})]})}},5407:function(e,t,a){"use strict";var r=a(9268);a(6006);var l=a(9700),s=a(9977),n=a.n(s),i=a(5326),o=a.n(i);t.Z=e=>{let{control:t,required:a,name:s,errors:i,addClass:d,label:u,startDate:c,setStartDate:h}=e;return(0,r.jsxs)("div",{className:d,children:[(0,r.jsxs)("label",{className:"text-sm font-medium text-gray-700 tracking-wide block",children:[u,a&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"})]}),(0,r.jsx)(l.Qr,{name:s,control:t,rules:{required:a},render:e=>{let{field:t}=e;return(0,r.jsx)(n(),{selected:c,onChange:e=>{if(e){h(e);let a=o()(e).format("YYYY-MM-DD");t.onChange(a)}else h(null),t.onChange("")},dateFormat:"dd/MM/yyyy",value:c||"",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"w-full border rounded-lg py-2 px-4"})}}),(null==i?void 0:i.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[u," tidak boleh kosong"]})]})}},63:function(e,t,a){"use strict";var r=a(9268),l=a(3415),s=a(6394),n=a.n(s),i=a(6006),o=a(5883),d=a.n(o);t.Z=e=>{let{label:t,register:a,required:s,name:o,errors:u,addClass:c,accept:h,setValue:g,fileEdit:m,myFile:p,setMyFile:f}=e,[v,b]=(0,i.useState)(),x=e=>new Promise(()=>{if(e){var t;let a=(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.split("/"))||[],r=a[0];if("image"!==r)return j(e);console.log({splitType:a}),d().imageFileResizer(e,1500,1500,a[1],80,0,e=>{j(e)},"file")}else j(null)}),j=e=>{var t;if(e){let t=new FileReader;t.readAsDataURL(e),t.onloadend=()=>{f(t.result)}}let a=(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.split("/"))||[];b(a[0]),g(o,e)};return(0,r.jsxs)("div",{className:c,children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),s&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",id:"fileInput",type:"file",accept:h,onChange:e=>{var t;let a=(null===(t=e.target)||void 0===t?void 0:t.files[0])||null;x(a)}}),(0,r.jsx)("input",{type:"hidden",id:t,...a(o,{required:s})}),(0,r.jsxs)("div",{className:"flex gap-4 mt-2",children:[p&&"image"===v&&(0,r.jsx)(n(),{className:"rounded-lg",src:p,width:100,height:100,alt:""}),m&&"file"!==o&&(0,r.jsx)("div",{children:(0,r.jsx)(n(),{src:"".concat(l._n,"/").concat(m),width:100,height:100,alt:""})})]}),(null==u?void 0:u.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]})]})}},1281:function(e,t,a){"use strict";a.d(t,{u:function(){return l}});var r=a(9268);a(6006);let l=e=>{let{label:t,register:a,required:l,name:s,readOnly:n,placeholder:i,defaultOption:o,options:d=[],errors:u,addClass:c}=e;return(0,r.jsxs)("div",{className:c,children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),l&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("select",{className:"w-full rounded-lg py-2 px-2 bg-white border border-gray-300 focus:outline-none focus:border-secondary",id:t,readOnly:n,placeholder:i,...a(s,{required:l}),children:[(0,r.jsx)("option",{value:"",children:o}),d.map((e,t)=>(0,r.jsx)("option",{value:e.value,children:e.label},t))]})}),(null==u?void 0:u.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]})]})}},4496:function(e,t,a){"use strict";var r=a(9268);a(6006);var l=a(7133),s=a(9700);t.Z=e=>{let{dataDb:t,body:a,control:n,required:i,name:o,errors:d,placeholder:u,addClass:c,label:h,defaultOptions:g=!0}=e,m={multiValue:(e,t)=>t.data.isFixed?{...e,backgroundColor:"gray"}:e,multiValueLabel:(e,t)=>t.data.isFixed?{...e,fontWeight:"bold",color:"white",paddingRight:6}:e,multiValueRemove:(e,t)=>t.data.isFixed?{...e,display:"none"}:e},p=(e,t)=>{let a=e[t];if("id"===t)return{value:a,label:""};if(!t.includes("."))return{value:"",label:a};{let[a,...r]=t.split("."),l=e[a];return p(l,r.join("."))}},f=()=>{let e=t&&t.map((e,t)=>{let r=a.map(t=>p(e,t)),l=r.map(e=>e.label).filter(e=>""!==e),s=l.join(l.length>1?" - ":"");return{value:r.find(e=>""!==e.value).value,label:s}});return e},v=e=>{var t;return null===(t=f())||void 0===t?void 0:t.filter(t=>t.label.toLowerCase().includes(e.toLowerCase()))},b=(e,t)=>{setTimeout(()=>{t(v(e))},1e3)};return(0,r.jsxs)("div",{className:c,children:[h&&(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:h}),i&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)(s.Qr,{name:o,control:n,rules:{required:i},render:e=>{var t;let{field:{onChange:a,value:s,ref:n}}=e;return(0,r.jsx)(l.Z,{cacheOptions:!0,defaultOptions:g,isClearable:!0,isSearchable:!0,loadOptions:b,placeholder:u,menuPlacement:"auto",menuPosition:"fixed",menuPortalTarget:document.body,styles:m,ref:n,value:(null===(t=f())||void 0===t?void 0:t.find(e=>e.value===s))||null,onChange:e=>a(e?e.value:e)})}}),(null==d?void 0:d.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[h," tidak boleh kosong"]})]})}},5366:function(e,t,a){"use strict";a.d(t,{N:function(){return n}});var r=a(9268),l=a(6006),s=a(1712);let n=(0,l.createContext)({role:null});t.Z=e=>{let{children:t}=e,[a,i]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let e=s.Z.get("role");return i(e||null),()=>{i(null)}},[]),(0,r.jsx)(n.Provider,{value:{role:a},children:t})}},5883:function(e){(()=>{"use strict";var t={d:(e,a)=>{for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},a={};t.r(a),t.d(a,{default:()=>l});var r=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"changeHeightWidth",value:function(e,t,a,r,l,s){return a>r&&(e=Math.round(e*r/a),a=r),e>t&&(a=Math.round(a*t/e),e=t),l&&a<l&&(e=Math.round(e*l/a),a=l),s&&e<s&&(a=Math.round(a*s/e),e=s),{height:e,width:a}}},{key:"resizeAndRotateImage",value:function(e,t,a,r,l){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,o=document.createElement("canvas"),d=e.width,u=e.height,c=this.changeHeightWidth(u,a,d,t,r,l);i&&(90===i||270===i)?(o.width=c.height,o.height=c.width):(o.width=c.width,o.height=c.height),d=c.width,u=c.height;var h=o.getContext("2d");return h.fillStyle="rgba(0, 0, 0, 0)",h.fillRect(0,0,d,u),h.imageSmoothingEnabled&&h.imageSmoothingQuality&&(h.imageSmoothingQuality="high"),i&&(h.rotate(i*Math.PI/180),90===i?h.translate(0,-o.width):180===i?h.translate(-o.width,-o.height):270===i?h.translate(-o.height,0):0!==i&&360!==i||h.translate(0,0)),h.drawImage(e,0,0,d,u),o.toDataURL("image/".concat(s),n/100)}},{key:"b64toByteArrays",value:function(e,t){t=t||"image/jpeg";for(var a=atob(e.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),r=[],l=0;l<a.length;l+=512){for(var s=a.slice(l,l+512),n=Array(s.length),i=0;i<s.length;i++)n[i]=s.charCodeAt(i);var o=new Uint8Array(n);r.push(o)}return r}},{key:"b64toBlob",value:function(e,t){var a=this.b64toByteArrays(e,t);return new Blob(a,{type:t,lastModified:new Date})}},{key:"b64toFile",value:function(e,t,a){var r=this.b64toByteArrays(e,a);return new File(r,t,{type:a,lastModified:new Date})}},{key:"createResizedImage",value:function(e,a,r,l,s,n,i){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,c=new FileReader;if(!e)throw Error("File Not Found!");if(e.type&&!e.type.includes("image"))throw Error("File Is NOT Image!");c.readAsDataURL(e),c.onload=function(){var h=new Image;h.src=c.result,h.onload=function(){var c=t.resizeAndRotateImage(h,a,r,d,u,l,s,n),g="image/".concat(l);switch(o){case"blob":i(t.b64toBlob(c,g));break;case"base64":default:i(c);break;case"file":var m=e.name.toString().replace(/(png|jpeg|jpg|webp)$/i,"").concat(l.toString());i(t.b64toFile(c,m,g))}}},c.onerror=function(e){throw Error(e)}}}],function(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}();let l={imageFileResizer:function(e,t,a,l,s,n,i,o,d,u){return r.createResizedImage(e,t,a,l,s,n,i,o,d,u)}};e.exports=a})()}},function(e){e.O(0,[6680,4550,3674,6394,2629,3088,1988,9977,7133,3729,9253,7698,1744],function(){return e(e.s=8400)}),_N_E=e.O()}]);