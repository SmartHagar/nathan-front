(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3665],{4959:function(e,t,s){Promise.resolve().then(s.bind(s,3684))},3684:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var r=s(9268),a=s(4406),n=s(6008),l=s(6006),i=s(1712),o=s(9700),c=s(2985),d=s(8136),u=e=>{let{label:t,register:s,required:a,name:n,minLength:i,maxLength:o,errors:c,valueAsNumber:u,type:m="text",readOnly:x,placeholder:h,autoComplete:p="on",addClass:f,value:k}=e,[g,j]=(0,l.useState)(!1);return(0,r.jsxs)("div",{className:f,children:[(0,r.jsx)("label",{htmlFor:n,className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),a&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",type:"password"===m?g?"text":"password":m,id:n,readOnly:x,placeholder:h,autoComplete:p,...s(n,{required:a,minLength:i,maxLength:o,valueAsNumber:u}),value:k}),"password"===m&&(0,r.jsx)("div",{className:"absolute right-2 top-0 flex items-center h-full cursor-pointer text-secondary",onClick:()=>{j(!g)},children:g?(0,r.jsx)(d.rCC,{size:20}):(0,r.jsx)(d.I$m,{size:20})})]}),(null==c?void 0:c.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==c?void 0:c.type)==="minLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",i," karakter"]}),(null==c?void 0:c.type)==="maxLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",o," karakter"]}),(null==c?void 0:c.type)==="pattern"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]})]})},m=e=>{let{register:t,errors:s,control:a,watch:n,setValue:l}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{label:"Email",name:"email",register:t,required:!0,minLength:2,errors:s.email,addClass:"col-span-4",type:"email"}),(0,r.jsx)(u,{label:"Password",name:"password",register:t,required:!0,minLength:3,errors:s.password,addClass:"w-[100%] mt-2",type:"password"})]})},x=s(593),h=s(366),p=s(6394),f=s.n(p),k=e=>{let{setLogin:t,cekToken:s}=(0,a.Z)(),c=(0,n.useRouter)(),[d,u]=(0,l.useState)(""),[p,k]=(0,l.useState)(!1),g=async()=>{let e=i.Z.get("token");if(e){var t,r;let e=await s();if(console.log({cekAuth:e}),!(null==e?void 0:e.error)){let s=null==e?void 0:null===(r=e.data)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.hak;c.push("/".concat(s))}}k(!1)};(0,l.useEffect)(()=>{g()},[]);let{register:j,setValue:v,control:b,watch:y,handleSubmit:N,formState:{errors:w}}=(0,o.cI)(),Z=async e=>{var s;k(!0),u("");let r=await t(e);if(null==r?void 0:r.error)u(null==r?void 0:null===(s=r.error)||void 0===s?void 0:s.pesan);else{let{data:e}=r;console.log({data:e}),i.Z.set("token",e.token),i.Z.set("role",e.hak),i.Z.set("user_id",e.id),c.push(e.hak)}setTimeout(()=>{k(!1)},1e3)};return(0,r.jsx)("div",{className:"min-h-screen bg-login bg-cover bg-center",children:(0,r.jsx)("div",{className:"flex flex-col items-center min-h-screen justify-center z-10",children:(0,r.jsxs)("div",{className:"bg-white/20 w-full md:w-[35rem] backdrop-blur-sm rounded py-8 px-4 md:py-8 md:px-12 flex flex-col items-center justify-center z-50",children:[(0,r.jsxs)("div",{className:"w-full mb-2",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-center",children:"Selamat datang di"}),(0,r.jsx)("h3",{className:"text-3xl font-bold text-center",children:"Aplikasi Biro SDM"}),(0,r.jsx)("span",{children:d&&(0,r.jsx)("p",{className:"text-red-600 text-center",children:d})})]}),(0,r.jsx)("div",{className:"rounded-full h-32 w-32 relative",children:(0,r.jsx)(f(),{src:"/images/admin.png",alt:"logo",fill:!0})}),(0,r.jsx)("p",{className:"text-center mt-2 text-sm text-gray-500",children:"Silakan login untuk mendapatkan akses ke halaman admin"}),(0,r.jsxs)("form",{onSubmit:N(Z),className:"mt-8 w-full",children:[(0,r.jsx)(m,{register:j,errors:w,control:b,watch:y,setValue:v}),(0,r.jsx)("div",{className:"mt-4",children:p?(0,r.jsx)(x.Z,{}):(0,r.jsx)(h.Z,{text:"Login",onClick:N(Z)})})]})]})})})}},366:function(e,t,s){"use strict";var r=s(9268);s(6006),t.Z=e=>{let{text:t,onClick:s,addClass:a}=e;return(0,r.jsx)("button",{onClick:s,className:"bg-primary rounded-lg px-4 py-2 text-white w-fit cursor-pointer hover:shadow-sm hover:shadow-primary ".concat(a),children:t})}},2985:function(e,t,s){"use strict";var r=s(9268),a=s(6006),n=s(8136);t.Z=e=>{let{label:t,register:s,required:l,name:i,minLength:o,maxLength:c,errors:d,valueAsNumber:u,type:m="text",readOnly:x,placeholder:h,autoComplete:p="on",addClass:f,value:k}=e,[g,j]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:f,children:[(0,r.jsx)("label",{htmlFor:i,className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),l&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",type:"password"===m?g?"text":"password":m,id:i,readOnly:x,placeholder:h,autoComplete:p,...s(i,{required:l,minLength:o,maxLength:c,valueAsNumber:u}),value:k}),"password"===m&&(0,r.jsx)("div",{className:"absolute right-2 top-0 flex items-center h-full cursor-pointer text-blue-600",onClick:()=>{j(!g)},children:g?(0,r.jsx)(n.rCC,{size:20}):(0,r.jsx)(n.I$m,{size:20})})]}),(null==d?void 0:d.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==d?void 0:d.type)==="minLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",o," karakter"]}),(null==d?void 0:d.type)==="maxLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",c," karakter"]}),(null==d?void 0:d.type)==="pattern"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]})]})}},593:function(e,t,s){"use strict";var r=s(9268);s(6006),t.Z=()=>(0,r.jsx)("div",{children:"Loading..."})},3415:function(e,t,s){"use strict";s.d(t,{I8:function(){return n},Sj:function(){return l},_n:function(){return a},hi:function(){return i}});var r=s(5953);let a="https://nathan.apisparta.my.id",n=r.Z.create({baseURL:"".concat(a,"/auth")}),l=r.Z.create({baseURL:"".concat(a,"/crud")}),i=r.Z.create({baseURL:"".concat(a,"/api")});r.Z.create({baseURL:"".concat(a,"/storage")})},4406:function(e,t,s){"use strict";var r=s(2561),a=s(4475),n=s(3415),l=s(1712);let i=(0,r.Ue)((0,a.mW)((e,t)=>({setToken:async()=>{let e=l.Z.get("token");return e},setLogin:async e=>{try{let t=await (0,n.I8)({method:"post",url:"/login",data:e});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},cekToken:async()=>{let e=await t().setToken();try{let t=await (0,n.I8)({method:"post",url:"/cek_token",headers:{Authorization:"Bearer ".concat(e)}});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}}})));t.Z=i}},function(e){e.O(0,[6680,635,9218,9253,7698,1744],function(){return e(e.s=4959)}),_N_E=e.O()}]);